{"version":3,"sources":["webpack:///./src/views/publish/index.vue?7d9d","webpack:///src/views/publish/index.vue","webpack:///./src/views/publish/index.vue?b24f","webpack:///./src/views/publish/index.vue","webpack:///./src/views/publish/index.vue?92b2"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticStyle","attrs","slot","_v","ref","staticClass","formData","rules","model","callback","$$v","$set","cover","_l","item","key","id","on","$event","publish","staticRenderFns","data","channels","loading","title","content","channel_id","type","images","methods","$refs","myform","validate","isOk","url","method","params","getChannels","$http","created","component"],"mappings":"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","file":"js/chunk-f7428180.5015c083.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('slot-common',{staticStyle:{\"font-size\":\"18px\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('template',{slot:\"title\"},[_vm._v(\"发布内容\")])],2),_c('el-form',{ref:\"myform\",staticClass:\"from-publish\",attrs:{\"model\":_vm.formData,\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"标题\",\"prop\":\"title\"}},[_c('el-input',{staticClass:\"input\",model:{value:(_vm.formData.title),callback:function ($$v) {_vm.$set(_vm.formData, \"title\", $$v)},expression:\"formData.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"内容\",\"prop\":\"content\"}},[_c('el-input',{staticClass:\"text\",attrs:{\"type\":\"textarea\",\"rows\":6},model:{value:(_vm.formData.content),callback:function ($$v) {_vm.$set(_vm.formData, \"content\", $$v)},expression:\"formData.content\"}})],1),_c('el-form-item',{attrs:{\"label\":\"封面\",\"prop\":\"cover\"}},[_c('el-radio-group',{model:{value:(_vm.formData.cover.type),callback:function ($$v) {_vm.$set(_vm.formData.cover, \"type\", $$v)},expression:\"formData.cover.type\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"单图\")]),_c('el-radio',{attrs:{\"label\":3}},[_vm._v(\"三图\")]),_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"无图\")]),_c('el-radio',{attrs:{\"label\":-1}},[_vm._v(\"自动\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"频道\",\"prop\":\"channel_id\"}},[_c('el-select',{model:{value:(_vm.formData.channel_id),callback:function ($$v) {_vm.$set(_vm.formData, \"channel_id\", $$v)},expression:\"formData.channel_id\"}},_vm._l((_vm.channels),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1),_c('el-form-item',{staticStyle:{\"margin-left\":\"41px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.publish(false)}}},[_vm._v(\"发布\")]),_c('el-button',{on:{\"click\":function($event){return _vm.publish(true)}}},[_vm._v(\"存入草稿\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-card v-loading=\"loading\">\r\n    <!-- 面包屑 显示当前页面的路径，快速返回之前的任意页面。-->\r\n    <slot-common slot=\"header\" style='font-size:18px;'>\r\n      <template slot=\"title\">发布内容</template>\r\n    </slot-common>\r\n    <el-form ref=\"myform\" class=\"from-publish\" :model=\"formData\" :rules=\"rules\" label-width=\"80px\">\r\n      <!-- label 标签文本 -->\r\n      <el-form-item label=\"标题\" prop=\"title\">\r\n        <el-input class=\"input\" v-model=\"formData.title\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"内容\" prop=\"content\">\r\n        <el-input class=\"text\" type=\"textarea\" :rows=\"6\" v-model=\"formData.content\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"封面\" prop=\"cover\">\r\n        <el-radio-group v-model=\"formData.cover.type\">\r\n          <el-radio :label=\"1\">单图</el-radio>\r\n          <el-radio :label=\"3\">三图</el-radio>\r\n          <el-radio :label=\"0\">无图</el-radio>\r\n          <el-radio :label=\"-1\">自动</el-radio>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n      <el-form-item label=\"频道\" prop=\"channel_id\">\r\n        <el-select v-model=\"formData.channel_id\">\r\n          <el-option :label=\"item.name\" :value=\"item.id\" v-for=\"item in channels\" :key=\"item.id\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item style=\"margin-left:41px;\">\r\n        <el-button @click=\"publish(false)\" type=\"primary\">发布</el-button>\r\n        <el-button @click=\"publish(true)\">存入草稿</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      channels: [],\r\n      loading: false,\r\n      formData: {\r\n        title: '',\r\n        content: '',\r\n        channel_id: null,\r\n        cover: {\r\n          type: 0,\r\n          images: []\r\n        }\r\n      },\r\n      rules: {\r\n        title: [{ required: true, message: '标题内容不能为空' }],\r\n        content: [{ required: true, message: '文章内容不能为空' }],\r\n        channel_id: [{ required: true, message: '频道不能为空' }]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // 通过发布按钮来检验全部input\r\n    publish (draft) {\r\n      this.$refs.myform.validate((isOk) => {\r\n        if (isOk) {\r\n          this.$http({\r\n            url: '/articles',\r\n            method: 'post',\r\n            params: { draft }, // Query参数\r\n            data: this.formData // body参数\r\n          }).then(() => {\r\n            this.$router.push('/home/articles')\r\n          })\r\n        }\r\n      })\r\n    },\r\n    getChannels () {\r\n      this.$http({\r\n        url: '/channels'\r\n      }).then(result => {\r\n        // console.log(result.data.channels)\r\n        this.channels = result.data.channels\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    this.getChannels()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.from-publish {\r\n  margin-left: 50px;\r\n  .input {\r\n    width: 600px;\r\n  }\r\n  .text {\r\n    width: 800px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=48c7526e&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=48c7526e&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"48c7526e\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=48c7526e&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=48c7526e&lang=less&scoped=true&\""],"sourceRoot":""}