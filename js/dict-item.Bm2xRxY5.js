import{d as e,aE as l,r as a,W as t,c as o,o as i,bD as s,g as d,f as r,D as u,m as n,w as m,$ as p,ag as c,i as f,ah as g,ai as v,ac as b,e as _,h as y,G as h,j,aL as V,bE as k,aU as w,aY as x}from"./index.-2dSJvT_.js";import{v as C}from"./el-loading.DfcQG7DK.js";import{E as z}from"./el-dialog.Kkc-pGkQ.js";import{E as U}from"./el-input-number.Dw40aG4L.js";import{b as D,c as E}from"./el-select.D5K2M6II.js";import{E as I}from"./el-card.BXatHMm7.js";import{_ as T}from"./index.oCg5ROL0.js";import{E as q,a as F}from"./el-table-column.CXF3oDjy.js";import"./el-checkbox.5kbAoqEu.js";import"./el-tooltip.hAP85Bn3.js";import"./el-scrollbar.h6wvvJ8y.js";import{E as N,a as S}from"./el-tag.CL_KEoGm.js";import{E as B}from"./index.6v8T4Dn9.js";import"./index.DNWtI2fw.js";import"./use-dialog.DWCABKHh.js";import"./refs.Cw5r5QN8.js";import"./index.CsCgWOBa.js";import"./_baseIteratee.Jw5YRMh2.js";import"./index.od3oxRLs.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";const R={class:"app-container"},G={class:"search-bar mt-5"},K={class:"mb-[10px]"},L={class:"dialog-footer"},O=e({name:"DictItem",inherititems:!1,__name:"dict-item",setup(e){const O=l(),P=a(O.query.dictCode),W=a(),Y=a(),$=a(!1),A=a([]),H=a(0),J=t({pageNum:1,pageSize:10}),M=a(),Q=t({title:"",visible:!1}),X=t({}),Z=o(()=>({value:[{required:!0,message:"请输入字典值",trigger:"blur"}],label:[{required:!0,message:"请输入字典标签",trigger:"blur"}]}));function ee(){$.value=!0,k.getDictItemPage(P.value,J).then(e=>{M.value=e.list,H.value=e.total}).finally(()=>{$.value=!1})}function le(){W.value.resetFields(),J.pageNum=1,ee()}function ae(e){A.value=e.map(e=>e.id)}function te(e){Q.visible=!0,Q.title=e?"编辑字典项":"新增字典项",(null==e?void 0:e.id)&&k.getDictItemFormData(P.value,e.id).then(e=>{Object.assign(X,e)})}function oe(){Y.value.validate(e=>{if(e){$.value=!0;const e=X.id;X.dictCode=P.value,e?k.updateDictItem(P.value,e,X).then(()=>{w.success("修改成功"),ie(),ee()}).finally(()=>$.value=!1):k.createDictItem(P.value,X).then(()=>{w.success("新增成功"),ie(),ee()}).finally(()=>$.value=!1)}})}function ie(){Q.visible=!1,Y.value.resetFields(),Y.value.clearValidate(),X.id=void 0,X.sort=1,X.status=1}function se(e){const l=[e||A.value].join(",");l?x.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{k.deleteDictItems(P.value,l).then(()=>{w.success("删除成功"),le()})},()=>{w.info("已取消删除")}):w.warning("请勾选删除项")}return i(()=>{ee()}),s(e=>{J.dictCode=e.query.dictCode,ee()}),(e,l)=>{const a=p,t=N,o=g,i=S,s=F,k=B,w=q,x=T,O=I,P=E,de=D,re=U,ue=z,ne=C;return r(),d("div",R,[u("div",G,[n(i,{ref_key:"queryFormRef",ref:W,model:f(J),inline:!0},{default:m(()=>[n(t,{label:"关键字",prop:"keywords"},{default:m(()=>[n(a,{modelValue:f(J).keywords,"onUpdate:modelValue":l[0]||(l[0]=e=>f(J).keywords=e),placeholder:"字典标签/字典值",clearable:"",onKeyup:c(ee,["enter"])},null,8,["modelValue"])]),_:1}),n(t,null,{default:m(()=>[n(o,{type:"primary",icon:"search",onClick:l[1]||(l[1]=e=>ee())},{default:m(()=>[...l[14]||(l[14]=[v("搜索",-1)])]),_:1}),n(o,{icon:"refresh",onClick:l[2]||(l[2]=e=>le())},{default:m(()=>[...l[15]||(l[15]=[v("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),n(O,{shadow:"never"},{default:m(()=>[u("div",K,[n(o,{type:"success",icon:"plus",onClick:l[3]||(l[3]=e=>te())},{default:m(()=>[...l[16]||(l[16]=[v("新增",-1)])]),_:1}),n(o,{type:"danger",disabled:0===f(A).length,icon:"delete",onClick:l[4]||(l[4]=e=>se())},{default:m(()=>[...l[17]||(l[17]=[v(" 删除 ",-1)])]),_:1},8,["disabled"])]),b((r(),_(w,{"highlight-current-row":"",data:f(M),border:"",onSelectionChange:ae},{default:m(()=>[n(s,{type:"selection",width:"55",align:"center"}),n(s,{label:"字典项标签",prop:"label"}),n(s,{label:"字典项值",prop:"value"}),n(s,{label:"排序",prop:"sort"}),n(s,{label:"状态"},{default:m(e=>[n(k,{type:1===e.row.status?"success":"info"},{default:m(()=>[v(h(1===e.row.status?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),n(s,{fixed:"right",label:"操作",align:"center",width:"220"},{default:m(e=>[n(o,{type:"primary",link:"",size:"small",icon:"edit",onClick:j(l=>te(e.row),["stop"])},{default:m(()=>[...l[18]||(l[18]=[v(" 编辑 ",-1)])]),_:1},8,["onClick"]),n(o,{type:"danger",link:"",size:"small",icon:"delete",onClick:j(l=>se(e.row.id),["stop"])},{default:m(()=>[...l[19]||(l[19]=[v(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[ne,f($)]]),f(H)>0?(r(),_(x,{key:0,total:f(H),"onUpdate:total":l[5]||(l[5]=e=>V(H)?H.value=e:null),page:f(J).pageNum,"onUpdate:page":l[6]||(l[6]=e=>f(J).pageNum=e),limit:f(J).pageSize,"onUpdate:limit":l[7]||(l[7]=e=>f(J).pageSize=e),onPagination:ee},null,8,["total","page","limit"])):y("",!0)]),_:1}),n(ue,{modelValue:f(Q).visible,"onUpdate:modelValue":l[13]||(l[13]=e=>f(Q).visible=e),title:f(Q).title,width:"820px",onClose:ie},{footer:m(()=>[u("div",L,[n(o,{type:"primary",onClick:oe},{default:m(()=>[...l[28]||(l[28]=[v("确 定",-1)])]),_:1}),n(o,{onClick:ie},{default:m(()=>[...l[29]||(l[29]=[v("取 消",-1)])]),_:1})])]),default:m(()=>[n(i,{ref_key:"dataFormRef",ref:Y,model:f(X),rules:f(Z),"label-width":"100px"},{default:m(()=>[n(O,{shadow:"never"},{default:m(()=>[n(t,{label:"字典项标签",prop:"label"},{default:m(()=>[n(a,{modelValue:f(X).label,"onUpdate:modelValue":l[8]||(l[8]=e=>f(X).label=e),placeholder:"请输入字典标签"},null,8,["modelValue"])]),_:1}),n(t,{label:"字典项值",prop:"value"},{default:m(()=>[n(a,{modelValue:f(X).value,"onUpdate:modelValue":l[9]||(l[9]=e=>f(X).value=e),placeholder:"请输入字典值"},null,8,["modelValue"])]),_:1}),n(t,{label:"状态"},{default:m(()=>[n(de,{modelValue:f(X).status,"onUpdate:modelValue":l[10]||(l[10]=e=>f(X).status=e)},{default:m(()=>[n(P,{value:1},{default:m(()=>[...l[20]||(l[20]=[v("启用",-1)])]),_:1}),n(P,{value:0},{default:m(()=>[...l[21]||(l[21]=[v("禁用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),n(t,{label:"排序"},{default:m(()=>[n(re,{modelValue:f(X).sort,"onUpdate:modelValue":l[11]||(l[11]=e=>f(X).sort=e),"controls-position":"right"},null,8,["modelValue"])]),_:1}),n(t,{label:"标签类型"},{default:m(()=>[f(X).tagType?(r(),_(k,{key:0,type:f(X).tagType,class:"mr-2"},{default:m(()=>[v(h(f(X).label),1)]),_:1},8,["type"])):y("",!0),n(de,{modelValue:f(X).tagType,"onUpdate:modelValue":l[12]||(l[12]=e=>f(X).tagType=e)},{default:m(()=>[n(P,{value:"success",border:"",size:"small"},{default:m(()=>[...l[22]||(l[22]=[v("success",-1)])]),_:1}),n(P,{value:"warning",border:"",size:"small"},{default:m(()=>[...l[23]||(l[23]=[v("warning",-1)])]),_:1}),n(P,{value:"info",border:"",size:"small"},{default:m(()=>[...l[24]||(l[24]=[v("info",-1)])]),_:1}),n(P,{value:"primary",border:"",size:"small"},{default:m(()=>[...l[25]||(l[25]=[v("primary",-1)])]),_:1}),n(P,{value:"danger",border:"",size:"small"},{default:m(()=>[...l[26]||(l[26]=[v("danger",-1)])]),_:1}),n(P,{value:"",border:"",size:"small"},{default:m(()=>[...l[27]||(l[27]=[v("清空",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{O as default};
