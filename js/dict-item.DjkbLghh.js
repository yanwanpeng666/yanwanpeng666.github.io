import{d as e,aG as a,r as l,W as t,c as o,o as s,aK as i,g as r,f as u,D as n,m as d,w as p,$ as m,ag as c,i as f,ah as b,ai as g,ac as v,e as _,h as y,b7 as h,G as j,j as V,aT as k,S as w,V as x,E as C,aS as U,bM as E,aZ as D}from"./index.Dv9sjPYC.js";import{v as I}from"./loading.S8LTmobk.js";import{E as N,a as S}from"./select.D46WCvpG.js";import"./scrollbar.DQblMs23.js";import{E as T}from"./popper.m2lNosSJ.js";/* empty css                */import{E as F}from"./input-number.sGCeKMc8.js";import{E as q,a as z}from"./radio-group.DKuTe-fa.js";import{E as B}from"./card.UCV2TBx1.js";import{_ as G}from"./index.D-M2h4YD.js";import{a as K,E as P}from"./table-column.D28nzGFS.js";import"./checkbox.Cq-dvxYE.js";import{E as Q,a as R}from"./form-item.DgRMSZzs.js";/* empty css                    */import{E as Z}from"./index.BqKoy5Fw.js";import"./strings.BtizHOxT.js";import"./toNumber.P9ps2NTq.js";import"./castArray.D1K_WIrw.js";import"./_baseIteratee.DbpbFJtj.js";import"./index.8lkWLndA.js";import"./index.BlULC2eY.js";import"./omit.B6E_lyF8.js";import"./_baseClone.Br4BWTY9.js";import"./pagination.CWkEuBr5.js";import"./debounce.CITkvERZ.js";import"./raf.B6j8aosc.js";const A={class:"app-container"},M={class:"search-container"},O={class:"data-table__toolbar"},W={class:"data-table__toolbar--actions"},$={class:"flex-y-center"},H={"flex-y-center":"","gap-10px":""},J={class:"dialog-footer"},L=e({__name:"dict-item",setup(e){const L=a(),X=l(L.query.dictCode),Y=l(),ee=l(),ae=l(!1),le=l([]),te=l(0),oe=t({pageNum:1,pageSize:10}),se=l(),ie=t({title:"",visible:!1}),re=t({}),ue=["primary","success","info","warning","danger"],ne=o(()=>({value:[{required:!0,message:"请输入字典值",trigger:"blur"}],label:[{required:!0,message:"请输入字典标签",trigger:"blur"}]}));function de(){ae.value=!0,E.getDictItemPage(X.value,oe).then(e=>{se.value=e.list,te.value=e.total}).finally(()=>{ae.value=!1})}function pe(){oe.pageNum=1,de()}function me(){Y.value.resetFields(),oe.pageNum=1,de()}function ce(e){le.value=e.map(e=>e.id)}function fe(e){ie.visible=!0,ie.title=e?"编辑字典项":"新增字典项",e?.id&&E.getDictItemFormData(X.value,e.id).then(e=>{Object.assign(re,e)})}function be(){ee.value.validate(e=>{if(e){ae.value=!0;const e=re.id;re.dictCode=X.value,e?E.updateDictItem(X.value,e,re).then(()=>{D.success("修改成功"),ge(),pe()}).finally(()=>ae.value=!1):E.createDictItem(X.value,re).then(()=>{D.success("新增成功"),ge(),pe()}).finally(()=>ae.value=!1)}})}function ge(){ee.value.resetFields(),ee.value.clearValidate(),re.id=void 0,re.sort=1,re.status=1,re.tagType="",ie.visible=!1}function ve(e){const a=[e||le.value].join(",");a?Z.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{E.deleteDictItems(X.value,a).then(()=>{D.success("删除成功"),me()})},()=>{D.info("已取消删除")}):D.warning("请勾选删除项")}return s(()=>{pe()}),(e,a)=>{const l=m,t=Q,o=b,s=R,E=P,D=h,Z=K,L=G,X=B,_e=z,ye=q,he=F,je=i("QuestionFilled"),Ve=C,ke=T,we=S,xe=N,Ce=U,Ue=I;return u(),r("div",A,[n("div",M,[d(s,{ref_key:"queryFormRef",ref:Y,model:f(oe),inline:!0},{default:p(()=>[d(t,{label:"关键字",prop:"keywords"},{default:p(()=>[d(l,{modelValue:f(oe).keywords,"onUpdate:modelValue":a[0]||(a[0]=e=>f(oe).keywords=e),placeholder:"字典标签/字典值",clearable:"",onKeyup:c(pe,["enter"])},null,8,["modelValue"])]),_:1}),d(t,{class:"search-buttons"},{default:p(()=>[d(o,{type:"primary",icon:"search",onClick:pe},{default:p(()=>[...a[13]||(a[13]=[g("搜索",-1)])]),_:1}),d(o,{icon:"refresh",onClick:me},{default:p(()=>[...a[14]||(a[14]=[g("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),d(X,{shadow:"never",class:"data-table"},{default:p(()=>[n("div",O,[n("div",W,[d(o,{type:"success",icon:"plus",onClick:a[1]||(a[1]=e=>fe())},{default:p(()=>[...a[15]||(a[15]=[g("新增",-1)])]),_:1}),d(o,{type:"danger",disabled:0===f(le).length,icon:"delete",onClick:a[2]||(a[2]=e=>ve())},{default:p(()=>[...a[16]||(a[16]=[g(" 删除 ",-1)])]),_:1},8,["disabled"])])]),v((u(),_(Z,{"highlight-current-row":"",data:f(se),border:"",onSelectionChange:ce},{default:p(()=>[d(E,{type:"selection",width:"55",align:"center"}),d(E,{label:"字典项标签",prop:"label"}),d(E,{label:"字典项值",prop:"value"}),d(E,{label:"排序",prop:"sort"}),d(E,{label:"状态"},{default:p(e=>[d(D,{type:1===e.row.status?"success":"info"},{default:p(()=>[g(j(1===e.row.status?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),d(E,{fixed:"right",label:"操作",align:"center",width:"220"},{default:p(e=>[d(o,{type:"primary",link:"",size:"small",icon:"edit",onClick:V(a=>fe(e.row),["stop"])},{default:p(()=>[...a[17]||(a[17]=[g(" 编辑 ",-1)])]),_:1},8,["onClick"]),d(o,{type:"danger",link:"",size:"small",icon:"delete",onClick:V(a=>ve(e.row.id),["stop"])},{default:p(()=>[...a[18]||(a[18]=[g(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Ue,f(ae)]]),f(te)>0?(u(),_(L,{key:0,total:f(te),"onUpdate:total":a[3]||(a[3]=e=>k(te)?te.value=e:null),page:f(oe).pageNum,"onUpdate:page":a[4]||(a[4]=e=>f(oe).pageNum=e),limit:f(oe).pageSize,"onUpdate:limit":a[5]||(a[5]=e=>f(oe).pageSize=e),onPagination:de},null,8,["total","page","limit"])):y("",!0)]),_:1}),d(Ce,{modelValue:f(ie).visible,"onUpdate:modelValue":a[12]||(a[12]=e=>f(ie).visible=e),title:f(ie).title,width:"600px",onClose:ge},{footer:p(()=>[n("div",J,[d(o,{type:"primary",onClick:be},{default:p(()=>[...a[23]||(a[23]=[g("确 定",-1)])]),_:1}),d(o,{onClick:ge},{default:p(()=>[...a[24]||(a[24]=[g("取 消",-1)])]),_:1})])]),default:p(()=>[d(s,{ref_key:"dataFormRef",ref:ee,model:f(re),rules:f(ne),"label-width":"100px"},{default:p(()=>[d(t,{label:"字典项标签",prop:"label"},{default:p(()=>[d(l,{modelValue:f(re).label,"onUpdate:modelValue":a[6]||(a[6]=e=>f(re).label=e),placeholder:"请输入字典标签"},null,8,["modelValue"])]),_:1}),d(t,{label:"字典项值",prop:"value"},{default:p(()=>[d(l,{modelValue:f(re).value,"onUpdate:modelValue":a[7]||(a[7]=e=>f(re).value=e),placeholder:"请输入字典值"},null,8,["modelValue"])]),_:1}),d(t,{label:"状态"},{default:p(()=>[d(ye,{modelValue:f(re).status,"onUpdate:modelValue":a[8]||(a[8]=e=>f(re).status=e)},{default:p(()=>[d(_e,{value:1},{default:p(()=>[...a[19]||(a[19]=[g("启用",-1)])]),_:1}),d(_e,{value:0},{default:p(()=>[...a[20]||(a[20]=[g("禁用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),d(t,{label:"排序"},{default:p(()=>[d(he,{modelValue:f(re).sort,"onUpdate:modelValue":a[9]||(a[9]=e=>f(re).sort=e),"controls-position":"right"},null,8,["modelValue"])]),_:1}),d(t,null,{label:p(()=>[n("div",$,[a[22]||(a[22]=g(" 标签类型 ",-1)),d(ke,null,{content:p(()=>[...a[21]||(a[21]=[g("回显样式，为空时则显示 '文本'",-1)])]),default:p(()=>[d(Ve,{class:"ml-1 cursor-pointer"},{default:p(()=>[d(je)]),_:1})]),_:1})])]),default:p(()=>[d(xe,{modelValue:f(re).tagType,"onUpdate:modelValue":a[10]||(a[10]=e=>f(re).tagType=e),placeholder:"请选择标签类型",clearable:"",onClear:a[11]||(a[11]=e=>f(re).tagType="")},{label:p(({value:e})=>[e?(u(),_(D,{key:0,type:e},{default:p(()=>[g(j(f(re).label?f(re).label:"字典标签"),1)]),_:1},8,["type"])):y("",!0)]),default:p(()=>[(u(),r(w,null,x(ue,e=>d(we,{key:e,label:e,value:e},{default:p(()=>[n("div",H,[d(D,{type:e},{default:p(()=>[g(j(f(re).label??"字典标签"),1)]),_:1},8,["type"]),n("span",null,j(e),1)])]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{L as default};
