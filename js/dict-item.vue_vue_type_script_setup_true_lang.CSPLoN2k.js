import{d as e,y as a,r as l,R as t,o,cw as s,a as i,c as d,k as r,W as n,w as u,f as p,$ as m,T as f,l as c,aa as y,aO as _,X as g,t as v,ax as b,aG as h,Y as C,Z as V}from"./index.BM8HYK7W.js";import{_ as k,a as j,E as w,b as x,c as U,d as E,e as S,v as N}from"./refresh.BU4WPd7d.js";import{E as F}from"./el-dialog.DOb72mWz.js";import{E as R}from"./el-input-number.B1aZbN5D.js";import{E as q}from"./el-card.JvKkyGLr.js";import{_ as z}from"./index.BojkOl8h.js";import{_ as B}from"./search.D9QYmBQ9.js";import"./el-tooltip.l0sNRNKZ.js";import"./el-popper.DARfmJxr.js";import"./el-scrollbar.mIbHh7R4.js";import{E as T}from"./el-tag.C9HAq4hI.js";import{_ as D}from"./plus.CKS9jjhi.js";import{E as O,a as P}from"./el-form-item.MoRrApRf.js";import{c as A,e as G,f as Q,h as W,i as X}from"./index.KnAoJ1Lb.js";const Y={class:"app-container"},Z={class:"search-container"},$={class:"dialog-footer"},H=e({name:"DictData",inheritAttrs:!1,__name:"dict-item",props:{typeCode:{type:String,default:()=>""},typeName:{type:String,default:()=>""}},setup(e){const H=e;a((()=>H.typeCode),(e=>{ee.typeCode=e,te.typeCode=e,ie()}));const I=l(O),J=l(O),K=l(!1),L=l([]),M=l(0),ee=t({pageNum:1,pageSize:10,typeCode:H.typeCode}),ae=l(),le=t({title:"",visible:!1}),te=t({status:1,typeCode:H.typeCode,sort:1}),oe=t({name:[{required:!0,message:"请输入字典名称",trigger:"blur"}],value:[{required:!0,message:"请输入字典值",trigger:"blur"}]});function se(){ee.typeCode&&(K.value=!0,A(ee).then((({data:e})=>{ae.value=e.list,M.value=e.total})).finally((()=>K.value=!1)))}function ie(){I.value.resetFields(),ee.pageNum=1,se()}function de(e){L.value=e.map((e=>e.id))}function re(e){le.visible=!0,e?(le.title="修改字典",G(e).then((({data:e})=>{Object.assign(te,e)}))):le.title="新增字典"}function ne(){J.value.validate((e=>{if(e){K.value=!1;const e=te.id;e?Q(e,te).then((()=>{b.success("修改成功"),ue(),ie()})).finally((()=>K.value=!1)):W(te).then((()=>{b.success("新增成功"),ue(),ie()})).finally((()=>K.value=!1))}}))}function ue(){le.visible=!1,J.value.resetFields(),J.value.clearValidate(),te.id=void 0,te.status=1,te.sort=1,te.typeCode=H.typeCode}function pe(e){const a=[e||L.value].join(",");a?h.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{X(a).then((()=>{b.success("删除成功"),ie()}))})):b.warning("请勾选删除项")}return o((()=>{se()})),(a,l)=>{const t=C,o=P,b=B,h=V,A=k,G=O,Q=D,W=j,X=w,H=T,me=x,fe=U,ce=z,ye=q,_e=R,ge=E,ve=S,be=F,he=s("hasPerm"),Ce=N;return i(),d("div",Y,[r("div",Z,[n(G,{ref_key:"queryFormRef",ref:I,model:p(ee),inline:!0},{default:u((()=>[n(o,{label:"关键字",prop:"name"},{default:u((()=>[n(t,{modelValue:p(ee).name,"onUpdate:modelValue":l[0]||(l[0]=e=>p(ee).name=e),placeholder:"字典名称",clearable:""},null,8,["modelValue"])])),_:1}),n(o,null,{default:u((()=>[n(h,{type:"primary",onClick:se},{default:u((()=>[n(b),m("搜索")])),_:1}),n(h,{onClick:ie},{default:u((()=>[n(A),m("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),n(ye,{shadow:"never"},{header:u((()=>[f((i(),c(h,{type:"success",onClick:l[1]||(l[1]=e=>re())},{default:u((()=>[n(Q),m("新增")])),_:1})),[[he,["sys:dict:add"]]]),f((i(),c(h,{type:"danger",disabled:0===p(L).length,onClick:l[2]||(l[2]=e=>pe())},{default:u((()=>[n(W),m("删除")])),_:1},8,["disabled"])),[[he,["sys:dict:delete"]]])])),default:u((()=>[f((i(),c(fe,{data:p(ae),border:"",onSelectionChange:de},{default:u((()=>[n(X,{type:"selection",width:"50"}),n(X,{label:"字典名称",prop:"name"}),n(X,{label:"字典值",prop:"value"}),n(X,{label:"状态",align:"center"},{default:u((e=>[1===e.row.status?(i(),c(H,{key:0,type:"success"},{default:u((()=>[m("启用")])),_:1})):(i(),c(H,{key:1,type:"info"},{default:u((()=>[m("禁用")])),_:1}))])),_:1}),n(X,{fixed:"right",label:"操作",align:"center"},{default:u((e=>[f((i(),c(h,{type:"primary",link:"",onClick:a=>re(e.row.id)},{default:u((()=>[n(me),m("编辑")])),_:2},1032,["onClick"])),[[he,["sys:dict:edit"]]]),f((i(),c(h,{type:"primary",link:"",onClick:y((a=>pe(e.row.id)),["stop"])},{default:u((()=>[n(W),m("删除")])),_:2},1032,["onClick"])),[[he,["sys:dict:delete"]]])])),_:1})])),_:1},8,["data"])),[[Ce,p(K)]]),p(M)>0?(i(),c(ce,{key:0,total:p(M),"onUpdate:total":l[3]||(l[3]=e=>_(M)?M.value=e:null),page:p(ee).pageNum,"onUpdate:page":l[4]||(l[4]=e=>p(ee).pageNum=e),limit:p(ee).pageSize,"onUpdate:limit":l[5]||(l[5]=e=>p(ee).pageSize=e),onPagination:se},null,8,["total","page","limit"])):g("",!0)])),_:1}),n(be,{modelValue:p(le).visible,"onUpdate:modelValue":l[11]||(l[11]=e=>p(le).visible=e),title:p(le).title,width:"500px",onClose:ue},{footer:u((()=>[r("div",$,[n(h,{type:"primary",onClick:ne},{default:u((()=>[m("确 定")])),_:1}),n(h,{onClick:ue},{default:u((()=>[m("取 消")])),_:1})])])),default:u((()=>[n(G,{ref_key:"dataFormRef",ref:J,model:p(te),rules:p(oe),"label-width":"100px"},{default:u((()=>[n(o,{label:"字典名称"},{default:u((()=>[m(v(e.typeName),1)])),_:1}),n(o,{label:"字典名称",prop:"name"},{default:u((()=>[n(t,{modelValue:p(te).name,"onUpdate:modelValue":l[6]||(l[6]=e=>p(te).name=e),placeholder:"请输入字典名称"},null,8,["modelValue"])])),_:1}),n(o,{label:"字典值",prop:"value"},{default:u((()=>[n(t,{modelValue:p(te).value,"onUpdate:modelValue":l[7]||(l[7]=e=>p(te).value=e),placeholder:"字典值"},null,8,["modelValue"])])),_:1}),n(o,{label:"排序",prop:"sort"},{default:u((()=>[n(_e,{modelValue:p(te).sort,"onUpdate:modelValue":l[8]||(l[8]=e=>p(te).sort=e),"controls-position":"right",min:0},null,8,["modelValue"])])),_:1}),n(o,{label:"状态",prop:"status"},{default:u((()=>[n(ve,{modelValue:p(te).status,"onUpdate:modelValue":l[9]||(l[9]=e=>p(te).status=e)},{default:u((()=>[n(ge,{label:1},{default:u((()=>[m("正常")])),_:1}),n(ge,{label:0},{default:u((()=>[m("停用")])),_:1})])),_:1},8,["modelValue"])])),_:1}),n(o,{label:"备注",prop:"remark"},{default:u((()=>[n(t,{modelValue:p(te).remark,"onUpdate:modelValue":l[10]||(l[10]=e=>p(te).remark=e),type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}});export{H as _};
