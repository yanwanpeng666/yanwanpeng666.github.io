import{_ as e,d as o,l as n,r as t,B as r,o as l,i as a,ap as i,z as s,v as d,A as u,L as c,c as p,bN as f,aB as v,bp as m,J as g,u as b,Z as w,aK as h,e as I,f as y,w as E,m as C,ba as F,bb as _,g as T,h as R,bO as S,ab as k,n as B,ad as K,E as M,ah as x,b as O,y as P,K as D,a5 as $,bP as A,C as G,M as L,D as z,F as N,j as H,S as j,bQ as J,bR as U,k as Y,q,H as Q}from"./index.Dv9sjPYC.js";import{O as W,E as Z}from"./popper.m2lNosSJ.js";import{E as V}from"./scrollbar.DQblMs23.js";import{d as X,a as ee,b as oe}from"./dropdown.BJAt-r5X.js";import{c as ne}from"./castArray.D1K_WIrw.js";var te=e(o({inheritAttrs:!1}),[["render",function(e,o,t,r,l,a){return n(e.$slots,"default")}],["__file","collection.vue"]]);var re=e(o({name:"ElCollectionItem",inheritAttrs:!1}),[["render",function(e,o,t,r,l,a){return n(e.$slots,"default")}],["__file","collection-item.vue"]]);const le="data-el-collection-item",ae=d({style:{type:u([String,Array,Object])},currentTabId:{type:u(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:u(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:ie,ElCollectionItem:se,COLLECTION_INJECTION_KEY:de,COLLECTION_ITEM_INJECTION_KEY:ue}=(e=>{const o=`El${e}Collection`,n=`${o}Item`,d=Symbol(o),u=Symbol(n),c={...te,name:o,setup(){const e=t(),o=new Map;s(d,{itemMap:o,getItems:()=>{const n=a(e);if(!n)return[];const t=Array.from(n.querySelectorAll(`[${le}]`));return[...o.values()].sort((e,o)=>t.indexOf(e.ref)-t.indexOf(o.ref))},collectionRef:e})}},p={...re,name:n,setup(e,{attrs:o}){const n=t(),c=r(d,void 0);s(u,{collectionItemRef:n}),l(()=>{const e=a(n);e&&c.itemMap.set(e,{ref:e,...o})}),i(()=>{const e=a(n);c.itemMap.delete(e)})}};return{COLLECTION_INJECTION_KEY:d,COLLECTION_ITEM_INJECTION_KEY:u,ElCollection:c,ElCollectionItem:p}})("RovingFocusGroup"),ce=Symbol("elRovingFocusGroup"),pe=Symbol("elRovingFocusGroupItem"),fe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},ve=e=>{const{activeElement:o}=document;for(const n of e){if(n===o)return;if(n.focus(),o!==document.activeElement)return}},me="currentTabIdChange",ge="rovingFocusGroup.entryFocus",be={bubbles:!1,cancelable:!0},we=o({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:ae,emits:[me,"entryFocus"],setup(e,{emit:o}){var n;const l=t(null!=(n=e.currentTabId||e.defaultCurrentTabId)?n:null),i=t(!1),d=t(!1),u=t(),{getItems:h}=r(de,void 0),I=p(()=>[{outline:"none"},e.style]),y=f(o=>{var n;null==(n=e.onMousedown)||n.call(e,o)},()=>{d.value=!0}),E=f(o=>{var n;null==(n=e.onFocus)||n.call(e,o)},e=>{const o=!a(d),{target:n,currentTarget:t}=e;if(n===t&&o&&!a(i)){const e=new Event(ge,be);if(null==t||t.dispatchEvent(e),!e.defaultPrevented){const e=h().filter(e=>e.focusable),o=[e.find(e=>e.active),e.find(e=>e.id===a(l)),...e].filter(Boolean).map(e=>e.ref);ve(o)}}d.value=!1}),C=f(o=>{var n;null==(n=e.onBlur)||n.call(e,o)},()=>{i.value=!1});s(ce,{currentTabbedId:m(l),loop:v(e,"loop"),tabIndex:p(()=>a(i)?-1:0),rovingFocusGroupRef:u,rovingFocusGroupRootStyle:I,orientation:v(e,"orientation"),dir:v(e,"dir"),onItemFocus:e=>{o(me,e)},onItemShiftTab:()=>{i.value=!0},onBlur:C,onFocus:E,onMousedown:y,onKeydown:o=>{const n=(e=>{const o=c(e);return fe[o]})(o);if(n){o.preventDefault();let l=h().filter(e=>e.focusable).map(e=>e.ref);switch(n){case"last":l.reverse();break;case"prev":case"next":{"prev"===n&&l.reverse();const a=l.indexOf(o.currentTarget);l=e.loop?(r=a+1,(t=l).map((e,o)=>t[(o+r)%t.length])):l.slice(a+1);break}}w(()=>{ve(l)})}var t,r}}),g(()=>e.currentTabId,e=>{l.value=null!=e?e:null}),b(u,ge,(...e)=>{o("entryFocus",...e)})}});var he=e(o({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:ie,ElRovingFocusGroupImpl:e(we,[["render",function(e,o,t,r,l,a){return n(e.$slots,"default")}],["__file","roving-focus-group-impl.vue"]])}}),[["render",function(e,o,t,r,l,a){const i=h("el-roving-focus-group-impl"),s=h("el-focus-group-collection");return y(),I(s,null,{default:E(()=>[C(i,F(_(e.$attrs)),{default:E(()=>[n(e.$slots,"default")]),_:3},16)]),_:3})}],["__file","roving-focus-group.vue"]]);const Ie=Symbol("elDropdown"),ye="elDropdown",{ButtonGroup:Ee}=x;var Ce=e(o({name:"ElDropdown",components:{ElButton:x,ElButtonGroup:Ee,ElScrollbar:V,ElTooltip:Z,ElRovingFocusGroup:he,ElOnlyChild:W,ElIcon:M,ArrowDown:K},props:X,emits:["visible-change","click","command"],setup(e,{emit:o}){const n=G(),r=O("dropdown"),{t:l}=P(),i=t(),d=t(),u=t(),c=t(),f=t(null),m=t(null),g=t(!1),b=p(()=>({maxHeight:D(e.maxHeight)})),w=p(()=>[r.m(C.value)]),h=p(()=>ne(e.trigger)),I=A().value,y=p(()=>e.id||I);function E(){var e;null==(e=u.value)||e.onClose()}const C=$();s(Ie,{contentRef:c,role:p(()=>e.role),triggerId:y,isUsingKeyboard:g,onItemEnter:function(){},onItemLeave:function(){const e=a(c);h.value.includes("hover")&&(null==e||e.focus({preventScroll:!0})),m.value=null},handleClose:E}),s(ye,{instance:n,dropdownSize:C,handleClick:function(){var e;null==(e=u.value)||e.onClose(void 0,0)},commandHandler:function(...e){o("command",...e)},trigger:v(e,"trigger"),hideOnClick:v(e,"hideOnClick")});return{t:l,ns:r,scrollbar:f,wrapStyle:b,dropdownTriggerKls:w,dropdownSize:C,triggerId:y,currentTabId:m,handleCurrentTabIdChange:function(e){m.value=e},handlerMainButtonClick:e=>{o("click",e)},handleClose:E,handleOpen:function(){var e;null==(e=u.value)||e.onOpen()},handleBeforeShowTooltip:function(){o("visible-change",!0)},handleShowTooltip:function(e){var o;g.value="keydown"===(null==e?void 0:e.type),null==(o=c.value)||o.focus()},handleBeforeHideTooltip:function(){o("visible-change",!1)},popperRef:u,contentRef:c,triggeringElementRef:i,referenceElementRef:d}}}),[["render",function(e,o,t,r,l,a){var i;const s=h("el-roving-focus-group"),d=h("el-scrollbar"),u=h("el-only-child"),c=h("el-tooltip"),p=h("el-button"),f=h("arrow-down"),v=h("el-icon"),m=h("el-button-group");return y(),T("div",{class:B([e.ns.b(),e.ns.is("disabled",e.disabled)])},[C(c,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"popper-style":e.popperStyle,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-arrow":e.showArrow,"show-after":"hover"===e.trigger?e.showTimeout:0,"hide-after":"hover"===e.trigger?e.hideTimeout:0,"virtual-ref":null!=(i=e.virtualRef)?i:e.triggeringElementRef,"virtual-triggering":e.virtualTriggering||e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"","focus-on-target":"",persistent:e.persistent,onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},S({content:E(()=>[C(d,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:E(()=>[C(s,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange},{default:E(()=>[n(e.$slots,"dropdown")]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:E(()=>[C(u,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:E(()=>[n(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","placement","popper-class","popper-style","trigger","trigger-keys","trigger-target-el","show-arrow","show-after","hide-after","virtual-ref","virtual-triggering","disabled","transition","teleported","persistent","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(y(),I(m,{key:0},{default:E(()=>[C(p,k({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:E(()=>[n(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),C(p,k({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:E(()=>[C(v,{class:B(e.ns.e("icon"))},{default:E(()=>[C(f)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):R("v-if",!0)],2)}],["__file","dropdown.vue"]]);var Fe=e(o({components:{ElRovingFocusCollectionItem:se},props:{focusable:{type:Boolean,default:!0},active:Boolean},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:n,onItemFocus:l,onItemShiftTab:i,onKeydown:d}=r(ce,void 0),u=A(),v=t(),m=f(e=>{o("mousedown",e)},o=>{e.focusable?l(a(u)):o.preventDefault()}),g=f(e=>{o("focus",e)},()=>{l(a(u))}),b=f(e=>{o("keydown",e)},e=>{const{shiftKey:o,target:n,currentTarget:t}=e;c(e)===L.tab&&o?i():n===t&&d(e)}),w=p(()=>n.value===a(u));return s(pe,{rovingFocusGroupItemRef:v,tabIndex:p(()=>a(w)?0:-1),handleMousedown:m,handleFocus:g,handleKeydown:b}),{id:u,handleKeydown:b,handleFocus:g,handleMousedown:m}}}),[["render",function(e,o,t,r,l,a){const i=h("el-roving-focus-collection-item");return y(),I(i,{id:e.id,focusable:e.focusable,active:e.active},{default:E(()=>[n(e.$slots,"default")]),_:3},8,["id","focusable","active"])}],["__file","roving-focus-item.vue"]]);const _e=o({name:"DropdownItemImpl",components:{ElIcon:M},props:ee,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const n=O("dropdown"),{role:t}=r(Ie,void 0),{collectionItemRef:l}=r(ue,void 0),{rovingFocusGroupItemRef:a,tabIndex:i,handleFocus:s,handleKeydown:d,handleMousedown:u}=r(pe,void 0),v=J(l,a),m=p(()=>"menu"===t.value?"menuitem":"navigation"===t.value?"link":"button"),g=f(e=>{const n=c(e);if([L.enter,L.numpadEnter,L.space].includes(n))return e.preventDefault(),e.stopImmediatePropagation(),o("clickimpl",e),!0},d);return{ns:n,itemRef:v,dataset:{[le]:""},role:m,tabIndex:i,handleFocus:s,handleKeydown:g,handleMousedown:u}}});const Te=()=>{const e=r(ye,{}),o=p(()=>null==e?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}};var Re=e(o({name:"ElDropdownItem",components:{ElRovingFocusItem:Fe,ElDropdownItemImpl:e(_e,[["render",function(e,o,t,r,l,a){const i=h("el-icon");return y(),T(j,null,[e.divided?(y(),T("li",{key:0,role:"separator",class:B(e.ns.bem("menu","item","divided"))},null,2)):R("v-if",!0),z("li",k({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o=>e.$emit("clickimpl",o),onFocus:e.handleFocus,onKeydown:H(e.handleKeydown,["self"]),onMousedown:e.handleMousedown,onPointermove:o=>e.$emit("pointermove",o),onPointerleave:o=>e.$emit("pointerleave",o)}),[e.icon?(y(),I(i,{key:0},{default:E(()=>[(y(),I(N(e.icon)))]),_:1})):R("v-if",!0),n(e.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}],["__file","dropdown-item-impl.vue"]])},inheritAttrs:!1,props:ee,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:n}){const{elDropdown:t}=Te(),l=G(),{onItemEnter:a,onItemLeave:i}=r(Ie,void 0),s=f(e=>(o("pointermove",e),e.defaultPrevented),U(o=>{if(e.disabled)return void i(o);const n=o.currentTarget;n===document.activeElement||n.contains(document.activeElement)||(a(o),o.defaultPrevented||null==n||n.focus({preventScroll:!0}))})),d=f(e=>(o("pointerleave",e),e.defaultPrevented),U(i));return{handleClick:f(n=>{if(!e.disabled)return o("click",n),"keydown"!==n.type&&n.defaultPrevented},o=>{var n,r,a;e.disabled?o.stopImmediatePropagation():((null==(n=null==t?void 0:t.hideOnClick)?void 0:n.value)&&(null==(r=t.handleClick)||r.call(t)),null==(a=t.commandHandler)||a.call(t,e.command,l,o))}),handlePointerMove:s,handlePointerLeave:d,propsAndAttrs:p(()=>({...e,...n}))}}}),[["render",function(e,o,t,r,l,a){const i=h("el-dropdown-item-impl"),s=h("el-roving-focus-item");return y(),I(s,{focusable:!e.disabled},{default:E(()=>[C(i,k(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:E(()=>[n(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])}],["__file","dropdown-item.vue"]]);var Se=e(o({name:"ElDropdownMenu",props:oe,setup(e){const o=O("dropdown"),{_elDropdownSize:n}=Te(),t=n.value,{contentRef:l,role:a,triggerId:i,isUsingKeyboard:s,handleClose:d}=r(Ie,void 0),{rovingFocusGroupRef:u,rovingFocusGroupRootStyle:v,onBlur:m,onFocus:g,onKeydown:b,onMousedown:w}=r(ce,void 0),{collectionRef:h}=r(de,void 0),I=p(()=>[o.b("menu"),o.bm("menu",null==t?void 0:t.value)]),y=J(l,u,h),E=f(o=>{var n;null==(n=e.onKeydown)||n.call(e,o)},e=>{const{currentTarget:o,target:n}=e,t=c(e);if(o.contains(n),L.tab===t)return d();b(e)});return{size:t,rovingFocusGroupRootStyle:v,dropdownKls:I,role:a,triggerId:i,dropdownListWrapperRef:y,handleKeydown:E,onBlur:m,handleFocus:function(e){s.value&&g(e)},onMousedown:w}}}),[["render",function(e,o,t,r,l,a){return y(),T("ul",{ref:e.dropdownListWrapperRef,class:B(e.dropdownKls),style:Y(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onFocusin:e.handleFocus,onFocusout:e.onBlur,onKeydown:H(e.handleKeydown,["self"]),onMousedown:H(e.onMousedown,["self"])},[n(e.$slots,"default")],46,["role","aria-labelledby","onFocusin","onFocusout","onKeydown","onMousedown"])}],["__file","dropdown-menu.vue"]]);const ke=q(Ce,{DropdownItem:Re,DropdownMenu:Se}),Be=Q(Re),Ke=Q(Se);export{ke as E,Ke as a,Be as b};
