import{v as e,cj as a,c as s,b8 as l,r as t,J as o,u as r,ap as i,K as n,_ as d,d as u,bz as f,ci as v,b as c,y as p,e as b,f as m,w as y,m as h,T as g,i as z,ac as k,ck as w,ba as C,D as E,ab as A,j as R,g as x,h as _,n as F,l as L,G as $,E as T,af as B,k as S,ae as j,q as H}from"./index.-2dSJvT_.js";import{E as I}from"./index.DNWtI2fw.js";import{d as P,a as q,u as D}from"./use-dialog.DWCABKHh.js";const M=e({...q,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},resizable:Boolean,size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),O={...P,"resize-start":(e,a)=>e instanceof MouseEvent&&"number"==typeof a,resize:(e,a)=>e instanceof MouseEvent&&"number"==typeof a,"resize-end":(e,a)=>e instanceof MouseEvent&&"number"==typeof a};function X(e,d,u){const{width:f,height:v}=a(),c=s(()=>["ltr","rtl"].includes(e.direction)),p=s(()=>["ltr","ttb"].includes(e.direction)?1:-1),b=s(()=>c.value?f.value:v.value),m=s(()=>l(y.value+p.value*h.value,4,b.value)),y=t(0),h=t(0),g=t(!1),z=t(!1);let k=[],w=[];o(()=>[e.size,e.resizable],()=>{z.value=!1,y.value=0,h.value=0,E()});const C=e=>{const{pageX:a,pageY:s}=e,l=a-k[0],t=s-k[1];h.value=c.value?l:t,u("resize",e,m.value)},E=e=>{g.value&&(k=[],y.value=m.value,h.value=0,g.value=!1,w.forEach(e=>null==e?void 0:e()),w=[],e&&u("resize-end",e,y.value))},A=r(d,"mousedown",a=>{e.resizable&&(z.value||(y.value=(()=>{var e;const a=null==(e=d.value)?void 0:e.closest('[aria-modal="true"]');return a?c.value?a.offsetWidth:a.offsetHeight:100})(),z.value=!0),k=[a.pageX,a.pageY],g.value=!0,u("resize-start",a,y.value),w.push(r(window,"mouseup",E),r(window,"mousemove",C)))});return i(()=>{A(),E()}),{size:s(()=>z.value?`${m.value}px`:n(e.size)),isResizing:g,isHorizontal:c}}const Y=u({name:"ElDrawer",inheritAttrs:!1});const G=H(d(u({...Y,props:M,emits:O,setup(e,{expose:a,emit:l}){const o=e,r=f();v({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},s(()=>!!r.title));const i=t(),n=t(),d=t(),u=c("drawer"),{t:H}=p(),{afterEnter:P,afterLeave:q,beforeLeave:M,visible:O,rendered:Y,titleId:G,bodyId:J,zIndex:K,onModalClick:N,onOpenAutoFocus:U,onCloseAutoFocus:W,onFocusoutPrevented:Q,onCloseRequested:V,handleClose:Z}=D(o,i),{isHorizontal:ee,size:ae,isResizing:se}=X(o,d,l),le=s(()=>o.modalPenetrable&&!o.modal);return a({handleClose:Z,afterEnter:P,afterLeave:q}),(e,a)=>(m(),b(z(I),{to:e.appendTo,disabled:"body"===e.appendTo&&!e.appendToBody},{default:y(()=>[h(g,{name:z(u).b("fade"),onAfterEnter:z(P),onAfterLeave:z(q),onBeforeLeave:z(M),persisted:""},{default:y(()=>{var a;return[k(h(z(w),{mask:e.modal,"overlay-class":[z(u).is("drawer"),null!=(a=e.modalClass)?a:"",`${z(u).namespace.value}-modal-drawer`,z(u).is("penetrable",z(le))],"z-index":z(K),onClick:z(N)},{default:y(()=>[h(z(C),{loop:"",trapped:z(O),"focus-trap-el":i.value,"focus-start-el":n.value,onFocusAfterTrapped:z(U),onFocusAfterReleased:z(W),onFocusoutPrevented:z(Q),onReleaseRequested:z(V)},{default:y(()=>[E("div",A({ref_key:"drawerRef",ref:i,"aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:z(G),"aria-describedby":z(J)},e.$attrs,{class:[z(u).b(),e.direction,z(O)&&"open",z(u).is("dragging",z(se))],style:{[z(ee)?"width":"height"]:z(ae)},role:"dialog",onClick:R(()=>{},["stop"])}),[E("span",{ref_key:"focusStartRef",ref:n,class:F(z(u).e("sr-focus")),tabindex:"-1"},null,2),e.withHeader?(m(),x("header",{key:0,class:F([z(u).e("header"),e.headerClass])},[e.$slots.title?L(e.$slots,"title",{key:1},()=>[_(" DEPRECATED SLOT ")]):L(e.$slots,"header",{key:0,close:z(Z),titleId:z(G),titleClass:z(u).e("title")},()=>[E("span",{id:z(G),role:"heading","aria-level":e.headerAriaLevel,class:F(z(u).e("title"))},$(e.title),11,["id","aria-level"])]),e.showClose?(m(),x("button",{key:2,"aria-label":z(H)("el.drawer.close"),class:F(z(u).e("close-btn")),type:"button",onClick:z(Z)},[h(z(T),{class:F(z(u).e("close"))},{default:y(()=>[h(z(B))]),_:1},8,["class"])],10,["aria-label","onClick"])):_("v-if",!0)],2)):_("v-if",!0),z(Y)?(m(),x("div",{key:1,id:z(J),class:F([z(u).e("body"),e.bodyClass])},[L(e.$slots,"default")],10,["id"])):_("v-if",!0),e.$slots.footer?(m(),x("div",{key:2,class:F([z(u).e("footer"),e.footerClass])},[L(e.$slots,"footer")],2)):_("v-if",!0),e.resizable?(m(),x("div",{key:3,ref_key:"draggerRef",ref:d,style:S({zIndex:z(K)}),class:F(z(u).e("dragger"))},null,6)):_("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[j,z(O)]])]}),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}}),[["__file","drawer.vue"]]));export{G as E};
