import{t as e,z as a,a8 as t,d as l,A as s,b as o,r as n,I as r,U as i,aa as u,a5 as d,e as c,h as v,i as b,g as p,n as f,_ as m,F as h,cq as y,cr as g,c as $,o as x,bv as P,l as w,E as C,bj as T,a4 as k,a0 as B,K as N,y as S,k as E,cs as R,b2 as A,M as F,aM as _,b6 as j,bR as K,S as q,bT as L,V as M,$ as V,p as z,q as U,G as W}from"./index.B3d8Dmuj.js";import{t as G,U as H}from"./use-form-item.DH5ATW-n.js";import{c as I}from"./strings.CWMG2Kzx.js";import{u as O}from"./index.Csr3q4eJ.js";const X=Symbol("tabsRootContextKey"),Y=e({tabs:{type:a(Array),default:()=>t([])}}),D="ElTabBar",J=l({name:D});var Q=m(l({...J,props:Y,setup(e,{expose:a}){const t=e,l=h(),m=s(X);m||G(D,"<el-tabs><el-tab-bar /></el-tabs>");const y=o("tabs"),g=n(),$=n(),x=()=>$.value=(()=>{let e=0,a=0;const s=["top","bottom"].includes(m.props.tabPosition)?"width":"height",o="width"===s?"x":"y",n="x"===o?"left":"top";return t.tabs.every((t=>{var o,r;const i=null==(r=null==(o=l.parent)?void 0:o.refs)?void 0:r[`tab-${t.uid}`];if(!i)return!1;if(!t.active)return!0;e=i[`offset${I(n)}`],a=i[`client${I(s)}`];const u=window.getComputedStyle(i);return"width"===s&&(a-=Number.parseFloat(u.paddingLeft)+Number.parseFloat(u.paddingRight),e+=Number.parseFloat(u.paddingLeft)),!1})),{[s]:`${a}px`,transform:`translate${I(o)}(${e}px)`}})(),P=[];r((()=>t.tabs),(async()=>{await i(),x(),(()=>{var e;P.forEach((e=>e.stop())),P.length=0;const a=null==(e=l.parent)?void 0:e.refs;if(a)for(const t in a)if(t.startsWith("tab-")){const e=a[t];e&&P.push(u(e,x))}})()}),{immediate:!0});const w=u(g,(()=>x()));return d((()=>{P.forEach((e=>e.stop())),P.length=0,w.stop()})),a({ref:g,update:x}),(e,a)=>(c(),v("div",{ref_key:"barRef",ref:g,class:b([p(y).e("active-bar"),p(y).is(p(m).props.tabPosition)]),style:f($.value)},null,6))}}),[["__file","tab-bar.vue"]]);const Z=e({panes:{type:a(Array),default:()=>t([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),ee="ElTabNav",ae=l({name:ee,props:Z,emits:{tabClick:(e,a,t)=>t instanceof Event,tabRemove:(e,a)=>a instanceof Event},setup(e,{expose:a,emit:t}){const l=s(X);l||G(ee,"<el-tabs><tab-nav /></el-tabs>");const d=o("tabs"),c=y(),v=g(),b=n(),p=n(),f=n(),m=n(),h=n(!1),S=n(0),E=n(!1),R=n(!0),A=$((()=>["top","bottom"].includes(l.props.tabPosition)?"width":"height")),F=$((()=>({transform:`translate${"width"===A.value?"X":"Y"}(-${S.value}px)`}))),_=()=>{if(!b.value)return;const e=b.value[`offset${I(A.value)}`],a=S.value;if(!a)return;const t=a>e?a-e:0;S.value=t},j=()=>{if(!b.value||!p.value)return;const e=p.value[`offset${I(A.value)}`],a=b.value[`offset${I(A.value)}`],t=S.value;if(e-t<=a)return;const l=e-t>2*a?t+a:e-a;S.value=l},K=async()=>{const e=p.value;if(!(h.value&&f.value&&b.value&&e))return;await i();const a=f.value.querySelector(".is-active");if(!a)return;const t=b.value,s=["top","bottom"].includes(l.props.tabPosition),o=a.getBoundingClientRect(),n=t.getBoundingClientRect(),r=s?e.offsetWidth-n.width:e.offsetHeight-n.height,u=S.value;let d=u;s?(o.left<n.left&&(d=u-(n.left-o.left)),o.right>n.right&&(d=u+o.right-n.right)):(o.top<n.top&&(d=u-(n.top-o.top)),o.bottom>n.bottom&&(d=u+(o.bottom-n.bottom))),d=Math.max(d,0),S.value=Math.min(d,r)},q=()=>{var a;if(!p.value||!b.value)return;e.stretch&&(null==(a=m.value)||a.update());const t=p.value[`offset${I(A.value)}`],l=b.value[`offset${I(A.value)}`],s=S.value;l<t?(h.value=h.value||{},h.value.prev=s,h.value.next=s+l<t,t-s<l&&(S.value=t-l)):(h.value=!1,s>0&&(S.value=0))},L=e=>{const a=e.code,{up:t,down:l,left:s,right:o}=N;if(![t,l,s,o].includes(a))return;const n=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),r=n.indexOf(e.target);let i;i=a===s||a===t?0===r?n.length-1:r-1:r<n.length-1?r+1:0,n[i].focus({preventScroll:!0}),n[i].click(),M()},M=()=>{R.value&&(E.value=!0)},V=()=>E.value=!1;return r(c,(e=>{"hidden"===e?R.value=!1:"visible"===e&&setTimeout((()=>R.value=!0),50)})),r(v,(e=>{e?setTimeout((()=>R.value=!0),50):R.value=!1})),u(f,q),x((()=>setTimeout((()=>K()),0))),P((()=>q())),a({scrollToActiveTab:K,removeFocus:V}),()=>{const a=h.value?[w("span",{class:[d.e("nav-prev"),d.is("disabled",!h.value.prev)],onClick:_},[w(C,null,{default:()=>[w(T,null,null)]})]),w("span",{class:[d.e("nav-next"),d.is("disabled",!h.value.next)],onClick:j},[w(C,null,{default:()=>[w(k,null,null)]})])]:null,s=e.panes.map(((a,s)=>{var o,n,r,i;const u=a.uid,c=a.props.disabled,v=null!=(n=null!=(o=a.props.name)?o:a.index)?n:`${s}`,b=!c&&(a.isClosable||e.editable);a.index=`${s}`;const p=b?w(C,{class:"is-icon-close",onClick:e=>t("tabRemove",a,e)},{default:()=>[w(B,null,null)]}):null,f=(null==(i=(r=a.slots).label)?void 0:i.call(r))||a.props.label,m=!c&&a.active?0:-1;return w("div",{ref:`tab-${u}`,class:[d.e("item"),d.is(l.props.tabPosition),d.is("active",a.active),d.is("disabled",c),d.is("closable",b),d.is("focus",E.value)],id:`tab-${v}`,key:`tab-${u}`,"aria-controls":`pane-${v}`,role:"tab","aria-selected":a.active,tabindex:m,onFocus:()=>M(),onBlur:()=>V(),onClick:e=>{V(),t("tabClick",a,v,e)},onKeydown:e=>{!b||e.code!==N.delete&&e.code!==N.backspace||t("tabRemove",a,e)}},[f,p])}));return w("div",{ref:f,class:[d.e("nav-wrap"),d.is("scrollable",!!h.value),d.is(l.props.tabPosition)]},[a,w("div",{class:d.e("nav-scroll"),ref:b},[w("div",{class:[d.e("nav"),d.is(l.props.tabPosition),d.is("stretch",e.stretch&&["top","bottom"].includes(l.props.tabPosition))],ref:p,style:F.value,role:"tablist",onKeydown:L},[e.type?null:w(Q,{ref:m,tabs:[...e.panes]},null),s])])])}}}),te=e({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:a(Function),default:()=>!0},stretch:Boolean}),le=e=>F(e)||_(e),se=l({name:"ElTabs",props:te,emits:{[H]:e=>le(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>le(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>le(e),tabAdd:()=>!0},setup(e,{emit:a,slots:t,expose:l}){var s;const u=o("tabs"),d=$((()=>["left","right"].includes(e.tabPosition))),{children:c,addChild:v,removeChild:b}=O(h(),"ElTabPane"),p=n(),f=n(null!=(s=e.modelValue)?s:"0"),m=async(t,l=!1)=>{var s,o,n;if(f.value!==t&&!A(t))try{!1!==await(null==(s=e.beforeLeave)?void 0:s.call(e,t,f.value))&&(f.value=t,l&&(a(H,t),a("tabChange",t)),null==(n=null==(o=p.value)?void 0:o.removeFocus)||n.call(o))}catch(r){}},y=(e,t,l)=>{e.props.disabled||(m(t,!0),a("tabClick",e,l))},g=(e,t)=>{e.props.disabled||A(e.props.name)||(t.stopPropagation(),a("edit",e.props.name,"remove"),a("tabRemove",e.props.name))},x=()=>{a("edit",void 0,"add"),a("tabAdd")};r((()=>e.modelValue),(e=>m(e))),r(f,(async()=>{var e;await i(),null==(e=p.value)||e.scrollToActiveTab()})),S(X,{props:e,currentName:f,registerPane:e=>{c.value.push(e)},sortPane:v,unregisterPane:b}),l({currentName:f});const P=({render:e})=>e();return()=>{const a=t["add-icon"],l=e.editable||e.addable?w("div",{class:[u.e("new-tab"),d.value&&u.e("new-tab-vertical")],tabindex:"0",onClick:x,onKeydown:e=>{e.code===N.enter&&x()}},[a?E(t,"add-icon"):w(C,{class:u.is("icon-plus")},{default:()=>[w(R,null,null)]})]):null,s=w("div",{class:[u.e("header"),d.value&&u.e("header-vertical"),u.is(e.tabPosition)]},[w(P,{render:()=>{const a=c.value.some((e=>e.slots.label));return w(ae,{ref:p,currentName:f.value,editable:e.editable,type:e.type,panes:c.value,stretch:e.stretch,onTabClick:y,onTabRemove:g},{$stable:!a})}},null),l]),o=w("div",{class:u.e("content")},[E(t,"default")]);return w("div",{class:[u.b(),u.m(e.tabPosition),{[u.m("card")]:"card"===e.type,[u.m("border-card")]:"border-card"===e.type}]},[o,s])}}}),oe=e({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),ne="ElTabPane",re=l({name:ne});var ie=m(l({...re,props:oe,setup(e){const a=e,t=h(),l=j(),i=s(X);i||G(ne,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const u=o("tab-pane"),d=n(),f=$((()=>a.closable||i.props.closable)),m=K((()=>{var e;return i.currentName.value===(null!=(e=a.name)?e:d.value)})),y=n(m.value),g=$((()=>{var e;return null!=(e=a.name)?e:d.value})),P=K((()=>!a.lazy||y.value||m.value));r(m,(e=>{e&&(y.value=!0)}));const w=q({uid:t.uid,slots:l,props:a,paneName:g,active:m,index:d,isClosable:f});return i.registerPane(w),x((()=>{i.sortPane(w)})),L((()=>{i.unregisterPane(w.uid)})),(e,a)=>p(P)?M((c(),v("div",{key:0,id:`pane-${p(g)}`,class:b(p(u).b()),role:"tabpanel","aria-hidden":!p(m),"aria-labelledby":`tab-${p(g)}`},[E(e.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[V,p(m)]]):z("v-if",!0)}}),[["__file","tab-pane.vue"]]);const ue=U(se,{TabPane:ie}),de=W(ie);export{ue as E,de as a};
