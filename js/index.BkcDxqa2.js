import{a as e,c as l,k as a,d as t,r as o,R as d,o as r,cw as i,W as s,w as n,f as p,V as u,$ as m,T as c,l as f,t as y,X as h,aa as b,bR as _,dc as v,dd as V,de as k,df as w,ax as g,dg as U,aG as j,dh as T,Y as C,Z as A}from"./index.BM8HYK7W.js";import{_ as E,E as N,b as x,a as O,c as L,d as I,e as M,v as B}from"./refresh.BU4WPd7d.js";import{E as G}from"./el-dialog.DOb72mWz.js";import{_ as q}from"./index.Dg1zUkXF.js";import{E as K}from"./el-input-number.B1aZbN5D.js";import"./el-tooltip.l0sNRNKZ.js";import{E as R}from"./el-popper.DARfmJxr.js";import{E as X}from"./el-tag.C9HAq4hI.js";import"./el-select.BXFPsYVq.js";import"./el-scrollbar.mIbHh7R4.js";import"./el-tree.BOV7JSyl.js";import{_ as F}from"./search.D9QYmBQ9.js";import{E as S}from"./el-tree-select.ZUgt5Nqn.js";import{E as z}from"./el-card.JvKkyGLr.js";import{_ as P}from"./index.DtFlLSEI.js";import{_ as $}from"./plus.CKS9jjhi.js";import{E as H,a as J}from"./el-form-item.MoRrApRf.js";import"./_Uint8Array.Bk6YvMkU.js";import"./debounce.BCOJmmYb.js";import"./index.DDcUXN2j.js";import"./hasIn.BAQCL1fl.js";import"./use-dialog.IGiCrkwp.js";import"./isUndefined.DgmxjSXK.js";import"./refs.BIGcnKJG.js";import"./el-tabs.CV5I27rs.js";import"./strings.Dq2gSJJ_.js";/* empty css                */import"./dropdown2.DpXnK3uF.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";import"./isEqual.CKhcz8jC.js";import"./index.Bj4YjYf5.js";import"./castArray.CjaThbuf.js";const Q={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},W=[a("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896a448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352c-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992c13.376-19.712 35.2-28.864 66.176-28.864c23.936 0 42.944 6.336 56.32 19.712c12.672 13.376 19.712 31.68 19.712 54.912c0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408c-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76c6.336-12.672 15.488-24.64 28.16-35.2c33.792-29.568 54.208-48.576 60.544-55.616c16.896-22.528 26.048-51.392 26.048-86.592c0-42.944-14.08-76.736-42.24-101.376c-28.16-25.344-65.472-37.312-111.232-37.312m-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784a49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72a51.968 51.968 0 0 0-15.488-38.016a55.936 55.936 0 0 0-39.424-14.784"},null,-1)];const Y={name:"ep-question-filled",render:function(a,t){return e(),l("svg",Q,[...W])}};var Z=(e=>(e.CATALOG="CATALOG",e.MENU="MENU",e.BUTTON="BUTTON",e.EXTLINK="EXTLINK",e))(Z||{});const D={class:"app-container"},ee={class:"search-container"},le=a("br",null,null,-1),ae={class:"dialog-footer"},te=t({name:"Menu",inheritAttrs:!1,__name:"index",setup(t){const Q=o(H),W=o(H),te=o(!1),oe=d({title:"",visible:!1}),de=d({}),re=o([]),ie=o([]),se=d({parentId:0,visible:1,sort:1,type:Z.MENU,alwaysShow:0,keepAlive:0}),ne=d({parentId:[{required:!0,message:"请选择顶级菜单",trigger:"blur"}],name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],type:[{required:!0,message:"请选择菜单类型",trigger:"blur"}],path:[{required:!0,message:"请输入路由路径",trigger:"blur"}],component:[{required:!0,message:"请输入组件路径",trigger:"blur"}],visible:[{required:!0,message:"请输入路由路径",trigger:"blur"}]}),pe=o(),ue=d({type:"",path:""});function me(){te.value=!0,v(de).then((({data:e})=>{re.value=e})).then((()=>{te.value=!1}))}function ce(){Q.value.resetFields(),me()}function fe(e){pe.value=e.id}function ye(e,l){V().then((({data:e})=>{ie.value=[{value:0,label:"顶级菜单",children:e}]})).then((()=>{oe.visible=!0,l?(oe.title="编辑菜单",k(l).then((({data:e})=>{Object.assign(se,e),ue.type=e.type,ue.path=e.path??""}))):(oe.title="新增菜单",se.parentId=e)}))}function he(){se.type!==ue.type?se.path="":se.path=ue.path}function be(){W.value.validate((e=>{if(e){const e=se.id;e?w(e,se).then((()=>{g.success("修改成功"),_e(),me()})):U(se).then((()=>{g.success("新增成功"),_e(),me()}))}}))}function _e(){oe.visible=!1,W.value.resetFields(),W.value.clearValidate(),se.id=void 0,se.parentId=0,se.visible=1,se.sort=1,se.perm=void 0,se.component=void 0,se.path=void 0,se.redirect=void 0,se.alwaysShow=void 0,se.keepAlive=void 0}return r((()=>{me()})),(t,o)=>{const d=C,r=J,v=F,V=A,k=E,w=H,U=$,pe=P,ue=N,ve=X,Ve=x,ke=O,we=L,ge=z,Ue=S,je=I,Te=M,Ce=Y,Ae=R,Ee=K,Ne=q,xe=G,Oe=i("hasPerm"),Le=B;return e(),l("div",D,[a("div",ee,[s(w,{ref_key:"queryFormRef",ref:Q,model:p(de),inline:!0},{default:n((()=>[s(r,{label:"关键字",prop:"keywords"},{default:n((()=>[s(d,{modelValue:p(de).keywords,"onUpdate:modelValue":o[0]||(o[0]=e=>p(de).keywords=e),placeholder:"菜单名称",clearable:"",onKeyup:u(me,["enter"])},null,8,["modelValue"])])),_:1}),s(r,null,{default:n((()=>[s(V,{type:"primary",onClick:me},{icon:n((()=>[s(v)])),default:n((()=>[m("搜索")])),_:1}),s(V,{onClick:ce},{icon:n((()=>[s(k)])),default:n((()=>[m(" 重置")])),_:1})])),_:1})])),_:1},8,["model"])]),s(ge,{shadow:"never",class:"table-container"},{header:n((()=>[c((e(),f(V,{type:"success",onClick:o[1]||(o[1]=e=>ye(0))},{icon:n((()=>[s(U)])),default:n((()=>[m(" 新增")])),_:1})),[[Oe,["sys:menu:add"]]])])),default:n((()=>[c((e(),f(we,{data:p(re),"highlight-current-row":"","row-key":"id","expand-row-keys":["1"],onRowClick:fe,"tree-props":{children:"children",hasChildren:"hasChildren"}},{default:n((()=>[s(ue,{label:"菜单名称","min-width":"200"},{default:n((e=>[s(pe,{"icon-class":e.row.icon},null,8,["icon-class"]),m(" "+y(e.row.name),1)])),_:1}),s(ue,{label:"类型",align:"center",width:"80"},{default:n((l=>[l.row.type===p(Z).CATALOG?(e(),f(ve,{key:0,type:"warning"},{default:n((()=>[m("目录")])),_:1})):h("",!0),l.row.type===p(Z).MENU?(e(),f(ve,{key:1,type:"success"},{default:n((()=>[m("菜单")])),_:1})):h("",!0),l.row.type===p(Z).BUTTON?(e(),f(ve,{key:2,type:"danger"},{default:n((()=>[m("按钮")])),_:1})):h("",!0),l.row.type===p(Z).EXTLINK?(e(),f(ve,{key:3,type:"info"},{default:n((()=>[m("外链")])),_:1})):h("",!0)])),_:1}),s(ue,{label:"路由路径",align:"left",width:"150",prop:"path"}),s(ue,{label:"组件路径",align:"left",width:"250",prop:"component"}),s(ue,{label:"权限标识",align:"center",width:"200",prop:"perm"}),s(ue,{label:"状态",align:"center",width:"80"},{default:n((l=>[1===l.row.visible?(e(),f(ve,{key:0,type:"success"},{default:n((()=>[m("显示")])),_:1})):(e(),f(ve,{key:1,type:"info"},{default:n((()=>[m("隐藏")])),_:1}))])),_:1}),s(ue,{label:"排序",align:"center",width:"80",prop:"sort"}),s(ue,{fixed:"right",align:"center",label:"操作",width:"220"},{default:n((l=>["CATALOG"==l.row.type||"MENU"==l.row.type?c((e(),f(V,{key:0,type:"primary",link:"",size:"small",onClick:b((e=>ye(l.row.id)),["stop"])},{default:n((()=>[s(U),m("新增 ")])),_:2},1032,["onClick"])),[[Oe,["sys:menu:add"]]]):h("",!0),c((e(),f(V,{type:"primary",link:"",size:"small",onClick:b((e=>ye(void 0,l.row.id)),["stop"])},{default:n((()=>[s(Ve),m("编辑 ")])),_:2},1032,["onClick"])),[[Oe,["sys:menu:edit"]]]),c((e(),f(V,{type:"primary",link:"",size:"small",onClick:b((e=>function(e){if(!e)return g.warning("请勾选删除项"),!1;j.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{T(e).then((()=>{g.success("删除成功"),me()}))})).catch((()=>g.info("已取消删除")))}(l.row.id)),["stop"])},{default:n((()=>[s(ke),m(" 删除 ")])),_:2},1032,["onClick"])),[[Oe,["sys:menu:delete"]]])])),_:1})])),_:1},8,["data"])),[[Le,p(te)]])])),_:1}),s(xe,{modelValue:p(oe).visible,"onUpdate:modelValue":o[16]||(o[16]=e=>p(oe).visible=e),title:p(oe).title,"destroy-on-close":"","append-to-body":"",width:"1000px",onClose:_e,top:"5vh"},{footer:n((()=>[a("div",ae,[s(V,{type:"primary",onClick:be},{default:n((()=>[m("确 定")])),_:1}),s(V,{onClick:_e},{default:n((()=>[m("取 消")])),_:1})])])),default:n((()=>[s(w,{ref_key:"menuFormRef",ref:W,model:p(se),rules:p(ne),"label-width":"160px"},{default:n((()=>[s(r,{label:"父级菜单",prop:"parentId"},{default:n((()=>[s(Ue,{modelValue:p(se).parentId,"onUpdate:modelValue":o[2]||(o[2]=e=>p(se).parentId=e),placeholder:"选择上级菜单",data:p(ie),filterable:"","check-strictly":"","render-after-expand":!1},null,8,["modelValue","data"])])),_:1}),s(r,{label:"菜单名称",prop:"name"},{default:n((()=>[s(d,{modelValue:p(se).name,"onUpdate:modelValue":o[3]||(o[3]=e=>p(se).name=e),placeholder:"请输入菜单名称"},null,8,["modelValue"])])),_:1}),s(r,{label:"菜单类型",prop:"type"},{default:n((()=>[s(Te,{modelValue:p(se).type,"onUpdate:modelValue":o[4]||(o[4]=e=>p(se).type=e),onChange:he},{default:n((()=>[s(je,{label:"CATALOG"},{default:n((()=>[m("目录")])),_:1}),s(je,{label:"MENU"},{default:n((()=>[m("菜单")])),_:1}),s(je,{label:"BUTTON"},{default:n((()=>[m("按钮")])),_:1}),s(je,{label:"EXTLINK"},{default:n((()=>[m("外链")])),_:1})])),_:1},8,["modelValue"])])),_:1}),"EXTLINK"==p(se).type?(e(),f(r,{key:0,label:"外链地址",prop:"path"},{default:n((()=>[s(d,{modelValue:p(se).path,"onUpdate:modelValue":o[5]||(o[5]=e=>p(se).path=e),placeholder:"请输入外链完整路径"},null,8,["modelValue"])])),_:1})):h("",!0),p(se).type==p(Z).CATALOG||p(se).type==p(Z).MENU?(e(),f(r,{key:1,label:"路由路径",prop:"path"},{default:n((()=>[p(se).type==p(Z).CATALOG?(e(),f(d,{key:0,modelValue:p(se).path,"onUpdate:modelValue":o[6]||(o[6]=e=>p(se).path=e),placeholder:"system"},null,8,["modelValue"])):(e(),f(d,{key:1,modelValue:p(se).path,"onUpdate:modelValue":o[7]||(o[7]=e=>p(se).path=e),placeholder:"user"},null,8,["modelValue"]))])),_:1})):h("",!0),p(se).type==p(Z).MENU?(e(),f(r,{key:2,label:"页面路径",prop:"component"},{default:n((()=>[s(d,{modelValue:p(se).component,"onUpdate:modelValue":o[8]||(o[8]=e=>p(se).component=e),placeholder:"system/user/index",style:{width:"95%"}},_({_:2},[p(se).type==p(Z).MENU?{name:"prepend",fn:n((()=>[m("src/views/")])),key:"0"}:void 0,p(se).type==p(Z).MENU?{name:"append",fn:n((()=>[m(".vue")])),key:"1"}:void 0]),1032,["modelValue"])])),_:1})):h("",!0),p(se).type!==p(Z).BUTTON?(e(),f(r,{key:3,prop:"visible",label:"显示状态"},{default:n((()=>[s(Te,{modelValue:p(se).visible,"onUpdate:modelValue":o[9]||(o[9]=e=>p(se).visible=e)},{default:n((()=>[s(je,{label:1},{default:n((()=>[m("显示")])),_:1}),s(je,{label:0},{default:n((()=>[m("隐藏")])),_:1})])),_:1},8,["modelValue"])])),_:1})):h("",!0),p(se).type===p(Z).CATALOG?(e(),f(r,{key:4,label:"根目录始终显示"},{label:n((()=>[a("div",null,[m(" 根目录始终显示 "),s(Ae,{placement:"bottom",effect:"light"},{content:n((()=>[m("是：根目录只有一个子路由显示目录 "),le,m("否：根目录只有一个子路由不显示目录，只显示子路由 ")])),default:n((()=>[s(Ce,{class:"inline-block"})])),_:1})])])),default:n((()=>[s(Te,{modelValue:p(se).alwaysShow,"onUpdate:modelValue":o[10]||(o[10]=e=>p(se).alwaysShow=e)},{default:n((()=>[s(je,{label:1},{default:n((()=>[m("是")])),_:1}),s(je,{label:0},{default:n((()=>[m("否")])),_:1})])),_:1},8,["modelValue"])])),_:1})):h("",!0),p(se).type===p(Z).MENU?(e(),f(r,{key:5,label:"是否缓存"},{default:n((()=>[s(Te,{modelValue:p(se).keepAlive,"onUpdate:modelValue":o[11]||(o[11]=e=>p(se).keepAlive=e)},{default:n((()=>[s(je,{label:1},{default:n((()=>[m("是")])),_:1}),s(je,{label:0},{default:n((()=>[m("否")])),_:1})])),_:1},8,["modelValue"])])),_:1})):h("",!0),s(r,{label:"排序",prop:"sort"},{default:n((()=>[s(Ee,{modelValue:p(se).sort,"onUpdate:modelValue":o[12]||(o[12]=e=>p(se).sort=e),style:{width:"100px"},"controls-position":"right",min:0},null,8,["modelValue"])])),_:1}),p(se).type==p(Z).BUTTON?(e(),f(r,{key:6,label:"权限标识",prop:"perm"},{default:n((()=>[s(d,{modelValue:p(se).perm,"onUpdate:modelValue":o[13]||(o[13]=e=>p(se).perm=e),placeholder:"sys:user:add"},null,8,["modelValue"])])),_:1})):h("",!0),p(se).type!==p(Z).BUTTON?(e(),f(r,{key:7,label:"图标",prop:"icon"},{default:n((()=>[s(Ne,{modelValue:p(se).icon,"onUpdate:modelValue":o[14]||(o[14]=e=>p(se).icon=e)},null,8,["modelValue"])])),_:1})):h("",!0),p(se).type==p(Z).CATALOG?(e(),f(r,{key:8,label:"跳转路由"},{default:n((()=>[s(d,{modelValue:p(se).redirect,"onUpdate:modelValue":o[15]||(o[15]=e=>p(se).redirect=e),placeholder:"跳转路由"},null,8,["modelValue"])])),_:1})):h("",!0)])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}});export{te as default};
