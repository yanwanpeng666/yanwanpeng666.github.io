import{b1 as e,b2 as a,v as s,A as l,az as t,_ as o,d as n,b3 as i,b4 as r,b5 as c,y as u,b as d,b6 as p,r as f,b7 as v,c as m,b8 as g,s as h,b9 as b,J as y,o as w,u as k,e as x,f as _,w as C,m as I,T as z,D as E,k as S,n as N,i as O,ba as $,h as L,g as R,l as j,j as T,E as A,af as P,S as V,bb as Y,an as B,ai as M,G as K,bc as X,bd as q,F as D,be as F,bf as U,bg as W,L as G,M as H,Z,q as J,bh as Q,bi as ee,bj as ae,I as se,at as le,ab as te,bk as oe,aQ as ne,aR as ie,bl as re,N as ce,bm as ue,bn as de,bo as pe,a as fe,aW as ve,aI as me,aE as ge,aK as he,aM as be,aL as ye,aS as we,$ as ke,ag as xe,ah as _e,bp as Ce,a$ as Ie}from"./index.-2dSJvT_.js";import{E as ze}from"./el-text.B9WyMWJL.js";import{E as Ee,a as Se}from"./el-tag.CL_KEoGm.js";import{E as Ne}from"./el-link.C7vK8_nA.js";import{E as Oe}from"./el-checkbox.5kbAoqEu.js";import{d as $e}from"./el-tooltip.hAP85Bn3.js";import{E as Le}from"./el-scrollbar.h6wvvJ8y.js";import{E as Re,a as je,b as Te}from"./el-dropdown-item.Dx4MTFTT.js";import{E as Ae}from"./el-switch.Cm9l7cRa.js";import{E as Pe}from"./index.6v8T4Dn9.js";import{E as Ve}from"./index.DNWtI2fw.js";import{_ as Ye}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./dropdown.DjT4D_ZP.js";import"./refs.Cw5r5QN8.js";function Be(a,s,l){var t=!0,o=!0;if("function"!=typeof a)throw new TypeError("Expected a function");return e(l)&&(t="leading"in l?!!l.leading:t,o="trailing"in l?!!l.trailing:o),$e(a,s,{leading:t,maxWait:s,trailing:o})}const Me=s({urlList:{type:l(Array),default:()=>t([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},scale:{type:Number,default:1},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:l(String)}}),Ke={close:()=>!0,error:e=>e instanceof Event,switch:e=>a(e),rotate:e=>a(e)},Xe=n({name:"ElImageViewer"});const qe=J(o(n({...Xe,props:Me,emits:Ke,setup(e,{expose:a,emit:s}){var l;const t=e,o={CONTAIN:{name:"contain",icon:i(c)},ORIGINAL:{name:"original",icon:i(r)}};let n;const{t:J}=u(),Q=d("image-viewer"),{nextZIndex:ee}=p(),ae=f(),se=f(),le=v(),te=m(()=>{const{scale:e,minScale:a,maxScale:s}=t;return g(e,a,s)}),oe=f(!0),ne=f(!1),ie=f(!1),re=f(t.initialIndex),ce=h(o.CONTAIN),ue=f({scale:te.value,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),de=f(null!=(l=t.zIndex)?l:ee());b(ie,{ns:Q});const pe=m(()=>{const{urlList:e}=t;return e.length<=1}),fe=m(()=>0===re.value),ve=m(()=>re.value===t.urlList.length-1),me=m(()=>t.urlList[re.value]),ge=m(()=>[Q.e("btn"),Q.e("prev"),Q.is("disabled",!t.infinite&&fe.value)]),he=m(()=>[Q.e("btn"),Q.e("next"),Q.is("disabled",!t.infinite&&ve.value)]),be=m(()=>{const{scale:e,deg:a,offsetX:s,offsetY:l,enableTransition:t}=ue.value;let n=s/e,i=l/e;const r=a*Math.PI/180,c=Math.cos(r),u=Math.sin(r);n=n*c+i*u,i=i*c-s/e*u;const d={transform:`scale(${e}) rotate(${a}deg) translate(${n}px, ${i}px)`,transition:t?"transform .3s":""};return ce.value.name===o.CONTAIN.name&&(d.maxWidth=d.maxHeight="100%"),d}),ye=m(()=>`${re.value+1} / ${t.urlList.length}`);function we(){le.stop(),null==n||n(),ie.value=!1,s("close")}function ke(){oe.value=!1}function xe(e){ne.value=!0,oe.value=!1,s("error",e),e.target.alt=J("el.image.error")}function _e(e){if(oe.value||0!==e.button||!ae.value)return;ue.value.enableTransition=!1;const{offsetX:a,offsetY:s}=ue.value,l=e.pageX,t=e.pageY,o=Be(e=>{ue.value={...ue.value,offsetX:a+e.pageX-l,offsetY:s+e.pageY-t}}),n=k(document,"mousemove",o),i=k(document,"mouseup",()=>{n(),i()});e.preventDefault()}function Ce(e){if(oe.value||!ae.value||1!==e.touches.length)return;ue.value.enableTransition=!1;const{offsetX:a,offsetY:s}=ue.value,{pageX:l,pageY:t}=e.touches[0],o=Be(e=>{const o=e.touches[0];ue.value={...ue.value,offsetX:a+o.pageX-l,offsetY:s+o.pageY-t}}),n=k(document,"touchmove",o),i=k(document,"touchend",()=>{n(),i()});e.preventDefault()}function Ie(){ue.value={scale:te.value,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function ze(){if(oe.value||ne.value)return;const e=W(o),a=Object.values(o),s=ce.value.name,l=(a.findIndex(e=>e.name===s)+1)%e.length;ce.value=o[e[l]],Ie()}function Ee(e){ne.value=!1;const a=t.urlList.length;re.value=(e+a)%a}function Se(){fe.value&&!t.infinite||Ee(re.value-1)}function Ne(){ve.value&&!t.infinite||Ee(re.value+1)}function Oe(e,a={}){if(oe.value||ne.value)return;const{minScale:l,maxScale:o}=t,{zoomRate:n,rotateDeg:i,enableTransition:r}={zoomRate:t.zoomRate,rotateDeg:90,enableTransition:!0,...a};switch(e){case"zoomOut":ue.value.scale>l&&(ue.value.scale=Number.parseFloat((ue.value.scale/n).toFixed(3)));break;case"zoomIn":ue.value.scale<o&&(ue.value.scale=Number.parseFloat((ue.value.scale*n).toFixed(3)));break;case"clockwise":ue.value.deg+=i,s("rotate",ue.value.deg);break;case"anticlockwise":ue.value.deg-=i,s("rotate",ue.value.deg)}ue.value.enableTransition=r}function $e(e){var a;"pointer"===(null==(a=e.detail)?void 0:a.focusReason)&&e.preventDefault()}function Le(){t.closeOnPressEscape&&we()}function Re(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}return y(()=>te.value,e=>{ue.value.scale=e}),y(me,()=>{Z(()=>{const e=se.value;(null==e?void 0:e.complete)||(oe.value=!0)})}),y(re,e=>{Ie(),s("switch",e)}),w(()=>{ie.value=!0,function(){const e=Be(e=>{switch(G(e)){case H.esc:t.closeOnPressEscape&&we();break;case H.space:ze();break;case H.left:Se();break;case H.up:Oe("zoomIn");break;case H.right:Ne();break;case H.down:Oe("zoomOut")}}),a=Be(e=>{Oe((e.deltaY||e.deltaX)<0?"zoomIn":"zoomOut",{zoomRate:t.zoomRate,enableTransition:!1})});le.run(()=>{k(document,"keydown",e),k(ae,"wheel",a)})}(),n=k("wheel",Re,{passive:!1})}),a({setActiveItem:Ee}),(e,a)=>(_(),x(O(Ve),{to:"body",disabled:!e.teleported},{default:C(()=>[I(z,{name:"viewer-fade",appear:""},{default:C(()=>[E("div",{ref_key:"wrapper",ref:ae,tabindex:-1,class:N(O(Q).e("wrapper")),style:S({zIndex:de.value})},[I(O($),{loop:"",trapped:"","focus-trap-el":ae.value,"focus-start-el":"container",onFocusoutPrevented:$e,onReleaseRequested:Le},{default:C(()=>[E("div",{class:N(O(Q).e("mask")),onClick:T(a=>e.hideOnClickModal&&we(),["self"])},null,10,["onClick"]),L(" CLOSE "),E("span",{class:N([O(Q).e("btn"),O(Q).e("close")]),onClick:we},[I(O(A),null,{default:C(()=>[I(O(P))]),_:1})],2),L(" ARROW "),O(pe)?L("v-if",!0):(_(),R(V,{key:0},[E("span",{class:N(O(ge)),onClick:Se},[I(O(A),null,{default:C(()=>[I(O(Y))]),_:1})],2),E("span",{class:N(O(he)),onClick:Ne},[I(O(A),null,{default:C(()=>[I(O(B))]),_:1})],2)],64)),e.$slots.progress||e.showProgress?(_(),R("div",{key:1,class:N([O(Q).e("btn"),O(Q).e("progress")])},[j(e.$slots,"progress",{activeIndex:re.value,total:e.urlList.length},()=>[M(K(O(ye)),1)])],2)):L("v-if",!0),L(" ACTIONS "),E("div",{class:N([O(Q).e("btn"),O(Q).e("actions")])},[E("div",{class:N(O(Q).e("actions__inner"))},[j(e.$slots,"toolbar",{actions:Oe,prev:Se,next:Ne,reset:ze,activeIndex:re.value,setActiveItem:Ee},()=>[I(O(A),{onClick:e=>Oe("zoomOut")},{default:C(()=>[I(O(X))]),_:1},8,["onClick"]),I(O(A),{onClick:e=>Oe("zoomIn")},{default:C(()=>[I(O(q))]),_:1},8,["onClick"]),E("i",{class:N(O(Q).e("actions__divider"))},null,2),I(O(A),{onClick:ze},{default:C(()=>[(_(),x(D(O(ce).icon)))]),_:1}),E("i",{class:N(O(Q).e("actions__divider"))},null,2),I(O(A),{onClick:e=>Oe("anticlockwise")},{default:C(()=>[I(O(F))]),_:1},8,["onClick"]),I(O(A),{onClick:e=>Oe("clockwise")},{default:C(()=>[I(O(U))]),_:1},8,["onClick"])])],2)],2),L(" CANVAS "),E("div",{class:N(O(Q).e("canvas"))},[ne.value&&e.$slots["viewer-error"]?j(e.$slots,"viewer-error",{key:0,activeIndex:re.value,src:O(me)}):(_(),R("img",{ref_key:"imgRef",ref:se,key:O(me),src:O(me),style:S(O(be)),class:N(O(Q).e("img")),crossorigin:e.crossorigin,onLoad:ke,onError:xe,onMousedown:_e,onTouchstart:Ce},null,46,["src","crossorigin"]))],2),j(e.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}}),[["__file","image-viewer.vue"]])),De=s({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:l([String,Object])},previewSrcList:{type:l(Array),default:()=>t([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},scale:{type:Number,default:1},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:l(String)}}),Fe={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>a(e),close:()=>!0,show:()=>!0},Ue=n({name:"ElImage",inheritAttrs:!1});const We=J(o(n({...Ue,props:De,emits:Fe,setup(e,{expose:a,emit:s}){const l=e,{t:t}=u(),o=d("image"),n=Q(),i=m(()=>ee(Object.entries(n).filter(([e])=>/^(data-|on[A-Z])/i.test(e)||["id","style"].includes(e)))),r=ae({excludeListeners:!0,excludeKeys:m(()=>Object.keys(i.value))}),c=f(),p=f(!1),v=f(!0),g=f(!1),h=f(),b=f(),k=se&&"loading"in HTMLImageElement.prototype;let I;const z=m(()=>[o.e("inner"),$.value&&o.e("preview"),v.value&&o.is("loading")]),S=m(()=>{const{fit:e}=l;return se&&e?{objectFit:e}:{}}),$=m(()=>{const{previewSrcList:e}=l;return le(e)&&e.length>0}),T=m(()=>{const{previewSrcList:e,initialIndex:a}=l;let s=a;return a>e.length-1&&(s=0),s}),A=m(()=>"eager"!==l.loading&&(!k&&"lazy"===l.loading||l.lazy)),P=()=>{se&&(v.value=!0,p.value=!1,c.value=l.src)};function Y(e){v.value=!1,p.value=!1,s("load",e)}function B(e){v.value=!1,p.value=!0,s("error",e)}const M=fe(function(e){e&&(P(),q())},200,!0);async function X(){var e;if(!se)return;await Z();const{scrollContainer:a}=l;if(re(a))b.value=a;else if(ce(a)&&""!==a)b.value=null!=(e=document.querySelector(a))?e:void 0;else if(h.value){const e=ue(h.value);b.value=de(e)?void 0:e}const{stop:s}=pe(h,([e])=>{M(e.isIntersecting)},{root:b});I=s}function q(){se&&M&&(null==I||I(),b.value=void 0,I=void 0)}function D(){$.value&&(g.value=!0,s("show"))}function F(){g.value=!1,s("close")}function U(e){s("switch",e)}return y(()=>l.src,()=>{A.value?(v.value=!0,p.value=!1,q(),X()):P()}),w(()=>{A.value?X():P()}),a({showPreview:D}),(e,a)=>(_(),R("div",te({ref_key:"container",ref:h},O(i),{class:[O(o).b(),e.$attrs.class]}),[p.value?j(e.$slots,"error",{key:0},()=>[E("div",{class:N(O(o).e("error"))},K(O(t)("el.image.error")),3)]):(_(),R(V,{key:1},[void 0!==c.value?(_(),R("img",te({key:0},O(r),{src:c.value,loading:e.loading,style:O(S),class:O(z),crossorigin:e.crossorigin,onClick:D,onLoad:Y,onError:B}),null,16,["src","loading","crossorigin"])):L("v-if",!0),v.value?(_(),R("div",{key:1,class:N(O(o).e("wrapper"))},[j(e.$slots,"placeholder",{},()=>[E("div",{class:N(O(o).e("placeholder"))},null,2)])],2)):L("v-if",!0)],64)),O($)?(_(),R(V,{key:2},[g.value?(_(),x(O(qe),{key:0,"z-index":e.zIndex,"initial-index":O(T),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"show-progress":e.showProgress,"url-list":e.previewSrcList,scale:e.scale,crossorigin:e.crossorigin,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:F,onSwitch:U},oe({toolbar:C(a=>[j(e.$slots,"toolbar",ne(ie(a)))]),default:C(()=>[e.$slots.viewer?(_(),R("div",{key:0},[j(e.$slots,"viewer")])):L("v-if",!0)]),_:2},[e.$slots.progress?{name:"progress",fn:C(a=>[j(e.$slots,"progress",ne(ie(a)))])}:void 0,e.$slots["viewer-error"]?{name:"viewer-error",fn:C(a=>[j(e.$slots,"viewer-error",ne(ie(a)))])}:void 0]),1032,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","scale","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):L("v-if",!0)],64)):L("v-if",!0)],16))}}),[["__file","image.vue"]])),Ge={class:"login"},He={class:"login-header"},Ze={class:"flex-y-center"},Je={class:"login-form"},Qe={class:"form-title"},ea={class:"cursor-pointer"},aa={class:"input-wrapper"},sa={class:"input-wrapper"},la={class:"input-wrapper"},ta={class:"flex-x-between w-full py-1"},oa={class:"login-footer"},na=Ye(n({__name:"index",setup(e){const a=ve(),s=me(),l=ge(),t=f(),o=f(s.theme===he.DARK),n=f(!1),i=f(!1),r=f(),c=f({username:"admin",password:"123456",captchaKey:"",captchaCode:""}),u=m(()=>({username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,message:"密码长度不能小于6位",trigger:"blur"}],captchaCode:[{required:!0,trigger:"blur",message:"请输入验证码"}]}));function d(){Ce.getCaptcha().then(e=>{c.value.captchaKey=e.captchaKey,r.value=e.captchaBase64})}async function p(){var e;null==(e=t.value)||e.validate(e=>{e&&(n.value=!0,a.login(c.value).then(async()=>{await a.getUserInfo();const{path:e,queryParams:s}=function(){const e=l.query.redirect??"/",a=new URL(e,window.location.origin),s=a.pathname,t={};return a.searchParams.forEach((e,a)=>{t[a]=e}),{path:s,queryParams:t}}();Ie.push({path:e,query:s})}).catch(()=>{d()}).finally(()=>{n.value=!1}))})}const v=()=>{const e=s.theme===he.DARK?he.LIGHT:he.DARK;s.changeTheme(e)};function g(e){e instanceof KeyboardEvent&&(i.value=e.getModifierState("CapsLock"))}const h=(e,a)=>{c.value.username=e,c.value.password=a};return w(()=>{d()}),(e,a)=>{const s=Ae,l=be("arrow-down"),f=A,m=Pe,b=Te,y=je,w=Re,k=be("User"),x=ke,z=Ee,S=be("Lock"),N=Le,$=We,L=Oe,j=Ne,P=_e,V=Se,Y=ze;return _(),R("div",Ge,[E("div",He,[E("div",Ze,[I(s,{modelValue:O(o),"onUpdate:modelValue":a[0]||(a[0]=e=>ye(o)?o.value=e:null),"inline-prompt":"","active-icon":"Moon","inactive-icon":"Sunny",onChange:v},null,8,["modelValue"])])]),E("div",Je,[I(V,{ref_key:"loginFormRef",ref:t,model:O(c),rules:O(u)},{default:C(()=>[E("div",Qe,[E("h2",null,K(O(we).title),1),I(w,{style:{position:"absolute",right:"0"}},{dropdown:C(()=>[I(y,null,{default:C(()=>[I(b,null,{default:C(()=>[I(m,null,{default:C(()=>[M(K(O(we).version),1)]),_:1})]),_:1}),I(b,{onClick:a[1]||(a[1]=e=>h("root","123456"))},{default:C(()=>[...a[7]||(a[7]=[M(" 超级管理员：root/123456 ",-1)])]),_:1}),I(b,{onClick:a[2]||(a[2]=e=>h("admin","123456"))},{default:C(()=>[...a[8]||(a[8]=[M(" 系统管理员：admin/123456 ",-1)])]),_:1}),I(b,{onClick:a[3]||(a[3]=e=>h("test","123456"))},{default:C(()=>[...a[9]||(a[9]=[M(" 测试小游客：test/123456 ",-1)])]),_:1})]),_:1})]),default:C(()=>[E("div",ea,[I(f,null,{default:C(()=>[I(l)]),_:1})])]),_:1})]),I(z,{prop:"username"},{default:C(()=>[E("div",aa,[I(f,{class:"mx-2"},{default:C(()=>[I(k)]),_:1}),I(x,{ref:"username",modelValue:O(c).username,"onUpdate:modelValue":a[4]||(a[4]=e=>O(c).username=e),placeholder:"用户名",name:"username",size:"large",class:"h-[48px]"},null,8,["modelValue"])])]),_:1}),I(N,{visible:O(i),content:"大写锁定已打开",placement:"right"},{default:C(()=>[I(z,{prop:"password"},{default:C(()=>[E("div",sa,[I(f,{class:"mx-2"},{default:C(()=>[I(S)]),_:1}),I(x,{modelValue:O(c).password,"onUpdate:modelValue":a[5]||(a[5]=e=>O(c).password=e),placeholder:"密码",type:"password",name:"password",size:"large",class:"h-[48px] pr-2","show-password":"",onKeyup:[g,xe(p,["enter"])]},null,8,["modelValue"])])]),_:1})]),_:1},8,["visible"]),I(z,{prop:"captchaCode"},{default:C(()=>[E("div",la,[a[10]||(a[10]=E("div",{class:"i-svg:captcha mx-2"},null,-1)),I(x,{modelValue:O(c).captchaCode,"onUpdate:modelValue":a[6]||(a[6]=e=>O(c).captchaCode=e),"auto-complete":"off",size:"large",class:"flex-1",placeholder:"验证码",onKeyup:xe(p,["enter"])},null,8,["modelValue"]),I($,{src:O(r),class:"captcha-img",onClick:d},null,8,["src"])])]),_:1}),E("div",ta,[I(L,null,{default:C(()=>[...a[11]||(a[11]=[M("记住我",-1)])]),_:1}),I(j,{type:"primary",href:"/forget-password"},{default:C(()=>[...a[12]||(a[12]=[M("忘记密码",-1)])]),_:1})]),I(P,{loading:O(n),type:"primary",size:"large",class:"w-full",onClick:T(p,["prevent"])},{default:C(()=>[...a[13]||(a[13]=[M(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1},8,["model","rules"])]),E("div",oa,[I(Y,{size:"small"},{default:C(()=>[...a[14]||(a[14]=[M(" Copyright © 2021 - 2025 youlai.tech All Rights Reserved. ",-1),E("a",{href:"http://beian.miit.gov.cn/",target:"_blank"},"皖ICP备20006496号-2",-1)])]),_:1})])])}}}),[["__scopeId","data-v-de2508ce"]]);export{na as default};
