import{d as e,aA as a,al as s,aF as r,ah as o,av as l,r as t,an as i,c as n,o as p,ae as m,h as c,B as d,l as u,g,aj as f,w as h,aG as v,e as j,D as _,au as w,W as y,X as x,j as b,az as C,E}from"./index.BpxBvkg6.js";import{E as V}from"./el-text.Dfxr0VoQ.js";import{E as U,a as q}from"./el-form-item.CxywRNiP.js";import{E as R}from"./el-button.C6IsoxHh.js";import{E as k}from"./el-link.Dioijf7e.js";import{E as K}from"./el-checkbox.Cx2Qfsbr.js";import{E as L}from"./el-image-viewer.BZqgwJnh.js";import{_ as $}from"./index.DoMFwLGe.js";import"./el-tooltip.l0sNRNKZ.js";import{E as z}from"./el-popper.SJe5T32R.js";import{E as A}from"./el-input.eKHZd0Zj.js";import{_ as P}from"./index.vue_vue_type_script_setup_true_lang.WtLl094x.js";import{E as D}from"./el-switch.u4fO9A_x.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./use-form-item.DHnwY37Z.js";import"./castArray.iOOpqcij.js";import"./event.CIKxL71l.js";import"./_Uint8Array.CFvYgvXX.js";import"./index.B_DhyVRv.js";import"./index.r1onNpzy.js";import"./isEqual.Ow3Z9Fhn.js";import"./index.CMMidXFv.js";import"./debounce.Cyc6wZO_.js";import"./index.tqjEEzm2.js";import"./position.CPYXfpKa.js";import"./scroll.Bzt3SYYQ.js";import"./index.DhqT0CfD.js";import"./el-scrollbar.CK5T237J.js";import"./dropdown.BnrgLQHX.js";import"./refs.CBHuj2DR.js";import"./validator.DNcJ3ITu.js";const B={class:"login"},G={class:"login-header"},M={class:"flex-y-center"},S={class:"login-content"},T={class:"login-form"},W={class:"form-title"},F={class:"input-wrapper"},X={class:"input-wrapper"},H={class:"input-wrapper"},O={class:"flex-x-between w-full py-1"},Q={class:"login-footer"},Z=I(e({__name:"index",setup(e){const I=a(),Z=s();r();const J=o(),{t:N}=l(),Y=t(),ee=t(Z.theme===i.DARK),ae=t(!1),se=t(!1),re=t();t(new URL("/img/logo.Caf6GyEz.png",import.meta.url).href),t(new URL("/img/login-image.BUpi_iuW.svg",import.meta.url).href);const oe=t({username:"admin",password:"123456",captchaKey:"",captchaCode:""}),le=n((()=>({username:[{required:!0,trigger:"blur",message:N("login.message.username.required")}],password:[{required:!0,trigger:"blur",message:N("login.message.password.required")},{min:6,message:N("login.message.password.min"),trigger:"blur"}],captchaCode:[{required:!0,trigger:"blur",message:N("login.message.captchaCode.required")}]})));function te(){v.getCaptcha().then((e=>{oe.value.captchaKey=e.captchaKey,re.value=e.captchaBase64}))}async function ie(){var e;null==(e=Y.value)||e.validate((e=>{e&&(ae.value=!0,I.login(oe.value).then((async()=>{await I.getUserInfo();const{path:e,queryParams:a}=function(){const e=J.query.redirect??"/",a=new URL(e,window.location.origin),s=a.pathname,r={};return a.searchParams.forEach(((e,a)=>{r[a]=e})),{path:s,queryParams:r}}();C.push({path:e,query:a})})).catch((()=>{te()})).finally((()=>{ae.value=!1})))}))}const ne=()=>{const e=Z.theme===i.DARK?i.LIGHT:i.DARK;Z.changeTheme(e)};function pe(e){e instanceof KeyboardEvent&&(se.value=e.getModifierState("CapsLock"))}return p((()=>{te()})),(e,a)=>{const s=D,r=P,o=m("User"),l=E,t=A,i=q,n=m("Lock"),p=z,v=$,C=L,I=K,Z=k,J=R,N=U,me=V;return j(),c("div",B,[d("div",G,[d("div",M,[u(s,{modelValue:g(ee),"onUpdate:modelValue":a[0]||(a[0]=e=>f(ee)?ee.value=e:null),"inline-prompt":"","active-icon":"Moon","inactive-icon":"Sunny",onChange:ne},null,8,["modelValue"]),u(r,{class:"ml-2 cursor-pointer"})])]),d("div",S,[d("div",T,[u(N,{ref_key:"loginFormRef",ref:Y,model:g(oe),rules:g(le)},{default:h((()=>[d("div",W,[d("h2",null,_(g(w).title),1)]),u(i,{prop:"username"},{default:h((()=>[d("div",F,[u(l,{class:"mx-2"},{default:h((()=>[u(o)])),_:1}),u(t,{ref:"username",modelValue:g(oe).username,"onUpdate:modelValue":a[1]||(a[1]=e=>g(oe).username=e),placeholder:e.$t("login.username"),name:"username",size:"large",class:"h-[48px]"},null,8,["modelValue","placeholder"])])])),_:1}),u(p,{visible:g(se),content:e.$t("login.capsLock"),placement:"right"},{default:h((()=>[u(i,{prop:"password"},{default:h((()=>[d("div",X,[u(l,{class:"mx-2"},{default:h((()=>[u(n)])),_:1}),u(t,{modelValue:g(oe).password,"onUpdate:modelValue":a[2]||(a[2]=e=>g(oe).password=e),placeholder:e.$t("login.password"),type:"password",name:"password",size:"large",class:"h-[48px] pr-2","show-password":"",onKeyup:[pe,y(ie,["enter"])]},null,8,["modelValue","placeholder"])])])),_:1})])),_:1},8,["visible","content"]),u(i,{prop:"captchaCode"},{default:h((()=>[d("div",H,[u(v,{"icon-class":"captcha",class:"mx-2"}),u(t,{modelValue:g(oe).captchaCode,"onUpdate:modelValue":a[3]||(a[3]=e=>g(oe).captchaCode=e),"auto-complete":"off",size:"large",class:"flex-1",placeholder:e.$t("login.captchaCode"),onKeyup:y(ie,["enter"])},null,8,["modelValue","placeholder"]),u(C,{src:g(re),class:"captcha-img",onClick:te},null,8,["src"])])])),_:1}),d("div",O,[u(I,null,{default:h((()=>[x(_(e.$t("login.rememberMe")),1)])),_:1}),u(Z,{type:"primary",href:"/forget-password"},{default:h((()=>[x(_(e.$t("login.forgetPassword")),1)])),_:1})]),u(J,{loading:g(ae),type:"primary",size:"large",class:"w-full",onClick:b(ie,["prevent"])},{default:h((()=>[x(_(e.$t("login.login")),1)])),_:1},8,["loading"])])),_:1},8,["model","rules"])])]),d("div",Q,[u(me,{size:"small"},{default:h((()=>[a[5]||(a[5]=x(" Copyright © 2021 - 2024 youlai.tech All Rights Reserved. ")),u(Z,{underline:!1,href:"http://beian.miit.gov.cn/",target:"_blank"},{default:h((()=>a[4]||(a[4]=[x(" 皖ICP备20006496号-2 ")]))),_:1})])),_:1})])])}}}),[["__scopeId","data-v-add73e40"]]);export{Z as default};
