import{d as e,o as t,W as a,r as l,cS as o,aK as i,g as r,f as s,m as n,w as m,ah as d,ai as u,S as c,V as p,e as f,b7 as x,G as h,D as g,ab as b,cr as v}from"./index.Dv9sjPYC.js";const w={class:"app-container"},k={style:{padding:"20px"}},y=e({__name:"index",setup(e){const y=[{label:"管理员",value:"admin"},{label:"用户",value:"user"},{label:"访客",value:"guest"}];t(()=>{setTimeout(()=>{T.formConfig.items.forEach(e=>{"roles"===e.field&&(e.itemRender.props.options=y)})},500)});const C=l(),T=a({autoResize:!0,showFooter:!0,footerMethod:({columns:e,data:t})=>[e.map((e,a)=>0===a||void 0===e.field?"":"status"===e.field?`启用：${t.reduce((e,t)=>e+(t.status?1:0),0)}条`:"-")],columns:[{type:"checkbox",width:60},{type:"expand",width:60,slots:{content:"column-expand"}},{type:"seq",width:60},{field:"id",title:"ID",visible:!1},{field:"username",title:"用户名"},{field:"roles",title:"角色",slots:{default:"column-roles"}},{field:"phone",title:"手机号"},{field:"email",title:"邮箱"},{field:"status",title:"状态",sortable:!0,filters:[{label:"启用",value:!0},{label:"禁用",value:!1}],filterMultiple:!1,formatter:({cellValue:e})=>!0===e?"启用":"禁用"},{field:"createTime",title:"创建时间",sortable:!0},{title:"操作",width:"150px",fixed:"right",showOverflow:!1,slots:{default:"column-operate"}}],columnConfig:{resizable:!0},customConfig:{checkMethod:({column:e})=>!["username"].includes(e.field)},checkboxConfig:{},expandConfig:{accordion:!0},rowConfig:{keyField:"id",isCurrent:!0},formConfig:{items:[{span:4,field:"username",title:"用户名",titlePrefix:{useHTML:!0,content:'点击链接：<a class="link" href="https://vxetable.cn" target="_blank">vxe-table官网</a>',icon:"vxe-icon-question-circle-fill"},itemRender:{name:"VxeInput",props:{type:"text",clearable:!0,placeholder:"请输入用户名"}}},{span:4,field:"roles",title:"角色",folding:!0,itemRender:{name:"VxeSelect",props:{multiple:!0,multiCharOverflow:-1,filterable:!0,clearable:!0,options:[],placeholder:"请选择角色"}}},{collapseNode:!0,itemRender:{name:"VxeButtonGroup",options:[{type:"submit",status:"primary",icon:"vxe-icon-search",content:"搜索"},{type:"reset",icon:"vxe-icon-refresh",content:"重置"}]}}]},toolbarConfig:{import:!0,export:!0,print:!0,refresh:!0,zoom:!0,custom:!0,slots:{buttons:"toolbar-btns"}},importConfig:{},exportConfig:{columns:[{field:"phone"},{field:"email"},{field:"status"},{field:"createTime"}]},printConfig:{},filterConfig:{remote:!1},sortConfig:{remote:!1,multiple:!1,chronological:!0},pagerConfig:{enabled:!0,pageSize:10},proxyConfig:{autoLoad:!0,seq:!0,form:!0,filter:!0,sort:!0,response:{result:"result",total:"total"},ajax:{query:({page:{currentPage:e,pageSize:t},form:a,filters:l,sort:o,sorts:i})=>new Promise(a=>{setTimeout(()=>{const l=[{username:"Richard Clark",roles:"editor",phone:"18185826431",email:"y.djf@xiswx.fk",status:!0,createTime:"2010-04-17 12:39:20",id:0xb3db2e429149880},{username:"Robert Garcia",roles:"admin",phone:"18125716043",email:"z.japgndxosu@inoudjxc.ie",status:!1,createTime:"2020-01-02 11:51:58",id:0x1cdda7eaf398530},{username:"Thomas Moore",roles:"admin",phone:"18106622048",email:"j.fvsgnjjutm@fmjw.se",status:!0,createTime:"1983-10-12 10:06:41",id:0x5d423f47b7c9440},{username:"Dorothy Lewis",roles:"admin",phone:"13321357284",email:"o.htso@iwxvehrs.tj",status:!0,createTime:"1970-03-03 00:26:45",id:0x214e86388b81e60},{username:"George Rodriguez",roles:"admin",phone:"18158641167",email:"x.sigizx@fwknokiqn.tr",status:!0,createTime:"1988-03-16 14:46:26",id:0x87727f308afc980},{username:"Angela Jackson",roles:"admin",phone:"19810721230",email:"j.gqrdqaqtu@ipthgm.fj",status:!0,createTime:"2006-09-26 12:53:37",id:0x4db735337fc37c0},{username:"James Walker",roles:"admin",phone:"18123903251",email:"k.axmdcsl@mcmeudog.cl",status:!0,createTime:"1981-01-19 12:51:34",id:0x1cdda7e147eeb00},{username:"Paul Garcia",roles:"admin",phone:"18617930381",email:"c.glufsn@vwqntlllj.es",status:!1,createTime:"2009-12-04 20:40:57",id:0x713e27aa56c8980},{username:"Jeffrey Miller",roles:"admin",phone:"18145245413",email:"u.poqrqw@arto.rw",status:!1,createTime:"1991-04-01 05:16:52",id:0x494656ea59b37c0},{username:"Donna Lewis",roles:"editor",phone:"19839835537",email:"l.lmpeoupu@rujdlzdbk.gf",status:!0,createTime:"1987-11-29 21:47:37",id:0x8e1bcc9cead4180},{username:"Jennifer Smith",roles:"editor",phone:"18145245413",email:"j.jqx@xjxqx.jp",status:!0,createTime:"1991-04-01 05:16:52",id:64000019700523e4}];a({result:l.slice((e-1)*t,e*t),total:l.length})},500)})}}}),j={formReset(){}},q=l(),R=a({title:"",maskClosable:!0,escClosable:!0,beforeHideMethod:()=>(_.value?.clearValidate(),Promise.resolve())}),_=l(),M=a({span:24,titleWidth:100,data:{username:"",password:""},items:[{field:"username",title:"用户名",itemRender:{name:"VxeInput",props:{placeholder:"请输入"}}},{field:"password",title:"密码",itemRender:{name:"VxeInput",props:{placeholder:"请输入"}}},{align:"right",itemRender:{name:"$buttons",children:[{props:{content:"取消"},events:{click:()=>q.value?.close()}},{props:{type:"submit",content:"确定",status:"primary"},events:{click:()=>S.onSubmitForm()}}]}}],rules:{username:[{required:!0,validator:({itemValue:e})=>{switch(!0){case!e:return new Error("请输入");case!e.trim():return new Error("空格无效")}}}],password:[{required:!0,validator:({itemValue:e})=>{switch(!0){case!e:return new Error("请输入");case!e.trim():return new Error("空格无效")}}}]}}),S={commitQuery:()=>C.value?.commitProxy("query"),onShowModal:e=>{R.title=e?"修改用户":"新增用户",q.value?.open()},onSubmitForm:()=>{},onDelete:e=>{let t=[];if(void 0===e){const e=C.value?.getCheckboxRecords();if(!e||0===e.length)return void o.modal.message({content:"请至少选择一条数据",status:"warning"});t=e.map(e=>e.id)}else t=[e.id];o.modal.confirm("确定要删除吗？").then(e=>{})}};return(e,t)=>{const a=i("vxe-button"),l=x,o=d,y=i("vxe-grid"),V=i("vxe-form"),z=i("vxe-modal");return s(),r("div",w,[n(y,b({ref_key:"xGrid",ref:C},T,v(j)),{"toolbar-btns":m(()=>[n(a,{status:"primary",icon:"vxe-icon-add",onClick:t[0]||(t[0]=e=>S.onShowModal())},{default:m(()=>[...t[2]||(t[2]=[u(" 新增用户 ",-1)])]),_:1}),n(a,{status:"danger",icon:"vxe-icon-delete",onClick:t[1]||(t[1]=e=>S.onDelete())},{default:m(()=>[...t[3]||(t[3]=[u(" 批量删除 ",-1)])]),_:1})]),"column-expand":m(({row:e})=>[g("div",k,[g("ul",null,[g("li",null,[t[4]||(t[4]=g("span",null,"ID：",-1)),g("span",null,h(e.id),1)]),g("li",null,[t[5]||(t[5]=g("span",null,"UserName：",-1)),g("span",null,h(e.username),1)]),g("li",null,[t[6]||(t[6]=g("span",null,"CreateTime：",-1)),g("span",null,h(e.createTime),1)])])])]),"column-roles":m(({row:e,column:t})=>[(s(!0),r(c,null,p(e[t.field].split(","),(e,t)=>(s(),f(l,{key:t,type:"admin"===e?"primary":"warning",effect:"plain"},{default:m(()=>[u(h(e),1)]),_:2},1032,["type"]))),128))]),"column-operate":m(({row:e})=>[n(o,{link:"",type:"primary",onClick:t=>S.onShowModal(e)},{default:m(()=>[...t[7]||(t[7]=[u("修改",-1)])]),_:1},8,["onClick"]),n(o,{link:"",type:"danger",onClick:t=>S.onDelete(e)},{default:m(()=>[...t[8]||(t[8]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1},16),n(z,b({ref_key:"xModal",ref:q},R),{default:m(()=>[n(V,b({ref_key:"xForm",ref:_},M),null,16)]),_:1},16)])}}});export{y as default};
