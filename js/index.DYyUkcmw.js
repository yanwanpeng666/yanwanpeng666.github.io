import{d as e,r as a,W as t,o,g as r,f as l,D as i,m as s,w as p,$ as m,ag as n,i as d,ah as u,ai as c,ac as f,e as h,h as g,aT as j}from"./index.Dv9sjPYC.js";import{v as b}from"./loading.S8LTmobk.js";import{E as w}from"./card.UCV2TBx1.js";import{_}from"./index.D-M2h4YD.js";import{a as y,E as v}from"./table-column.D28nzGFS.js";import"./checkbox.Cq-dvxYE.js";/* empty css                */import"./popper.m2lNosSJ.js";import"./scrollbar.DQblMs23.js";import{E as k,a as x}from"./form-item.DgRMSZzs.js";import{E as T}from"./date-picker-panel.BOvuOK0w.js";import{L as N}from"./log-api.HXTk_PFB.js";import"./pagination.CWkEuBr5.js";import"./select.D46WCvpG.js";import"./strings.BtizHOxT.js";import"./toNumber.P9ps2NTq.js";import"./castArray.D1K_WIrw.js";import"./_baseIteratee.DbpbFJtj.js";import"./index.8lkWLndA.js";import"./_baseClone.Br4BWTY9.js";import"./omit.B6E_lyF8.js";import"./debounce.CITkvERZ.js";import"./raf.B6j8aosc.js";import"./dayjs.min.nvYJnoDs.js";import"./index.BlULC2eY.js";const V={class:"app-container"},U={class:"search-container"},E=e({name:"Log",inheritAttrs:!1,__name:"index",setup(e){const E=a(),S=a(!1),Y=a(0),z=t({pageNum:1,pageSize:10,keywords:"",createTime:["",""]}),C=a();function D(){S.value=!0,N.getPage(z).then(e=>{C.value=e.list,Y.value=e.total}).finally(()=>{S.value=!1})}function P(){z.pageNum=1,D()}function q(){E.value.resetFields(),z.pageNum=1,z.createTime=void 0,D()}return o(()=>{P()}),(e,a)=>{const t=m,o=k,N=T,A=u,F=x,I=v,L=y,M=_,K=w,Q=b;return l(),r("div",V,[i("div",U,[s(F,{ref_key:"queryFormRef",ref:E,model:d(z),inline:!0},{default:p(()=>[s(o,{prop:"keywords",label:"关键字"},{default:p(()=>[s(t,{modelValue:d(z).keywords,"onUpdate:modelValue":a[0]||(a[0]=e=>d(z).keywords=e),placeholder:"日志内容",clearable:"",onKeyup:n(P,["enter"])},null,8,["modelValue"])]),_:1}),s(o,{prop:"createTime",label:"操作时间"},{default:p(()=>[s(N,{modelValue:d(z).createTime,"onUpdate:modelValue":a[1]||(a[1]=e=>d(z).createTime=e),editable:!1,type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"截止时间","value-format":"YYYY-MM-DD",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),s(o,{class:"search-buttons"},{default:p(()=>[s(A,{type:"primary",icon:"search",onClick:P},{default:p(()=>[...a[5]||(a[5]=[c("搜索",-1)])]),_:1}),s(A,{icon:"refresh",onClick:q},{default:p(()=>[...a[6]||(a[6]=[c("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),s(K,{shadow:"hover",class:"data-table"},{default:p(()=>[f((l(),h(L,{data:d(C),"highlight-current-row":"",border:"",class:"data-table__content"},{default:p(()=>[s(I,{label:"操作时间",prop:"createTime",width:"180"}),s(I,{label:"操作人",prop:"operator",width:"120"}),s(I,{label:"日志模块",prop:"module",width:"100"}),s(I,{label:"日志内容",prop:"content","min-width":"200"}),s(I,{label:"IP 地址",prop:"ip",width:"150"}),s(I,{label:"地区",prop:"region",width:"150"}),s(I,{label:"浏览器",prop:"browser",width:"150"}),s(I,{label:"终端系统",prop:"os",width:"200","show-overflow-tooltip":""}),s(I,{label:"执行时间(ms)",prop:"executionTime",width:"150"})]),_:1},8,["data"])),[[Q,d(S)]]),d(Y)>0?(l(),h(M,{key:0,total:d(Y),"onUpdate:total":a[2]||(a[2]=e=>j(Y)?Y.value=e:null),page:d(z).pageNum,"onUpdate:page":a[3]||(a[3]=e=>d(z).pageNum=e),limit:d(z).pageSize,"onUpdate:limit":a[4]||(a[4]=e=>d(z).pageSize=e),onPagination:D},null,8,["total","page","limit"])):g("",!0)]),_:1})])}}});export{E as default};
