import{d as e,aA as a,al as s,aF as r,ah as o,av as l,r as t,an as i,c as n,o as p,ae as m,h as c,B as d,l as u,g,aj as f,w as h,aG as v,e as j,D as w,au as _,W as y,X as x,j as b,az as C,E}from"./index.B3dxSiD7.js";import{E as V}from"./el-text.D_HHrdRT.js";import{E as U,a as q}from"./el-form-item.CAdE3Br-.js";import{E as K}from"./el-button.DtCLgtx8.js";import{E as R}from"./el-link.GGGqS7Qg.js";import{E as k}from"./el-checkbox.CHJINpiO.js";import{E as z}from"./el-image-viewer.Blekxb7X.js";import{_ as A}from"./index.ChqT_9Y2.js";import"./el-tooltip.l0sNRNKZ.js";import{E as L}from"./el-popper.Do7wgyRT.js";import{E as $}from"./el-input.HjNHTvfR.js";import{_ as P}from"./index.vue_vue_type_script_setup_true_lang.BweWMLGB.js";import{E as D}from"./el-switch.jEybHDXt.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./use-form-item.BphSJRP2.js";import"./castArray.g1trCJYT.js";import"./_Uint8Array.DubAtVHC.js";import"./index.Se5GGPah.js";import"./index.DSIYe2ZF.js";import"./isEqual.y_mDcI5o.js";import"./index.DxuMq_07.js";import"./debounce.Cf0GYq-g.js";import"./index.CNXW-bhB.js";import"./position.C031bvra.js";import"./scroll.CTku4j33.js";import"./index.iG2iE8kL.js";import"./el-scrollbar.77hz2kPP.js";import"./dropdown.VwgCjuDM.js";import"./refs.c6zq2KY3.js";import"./validator.WjsimOf7.js";const B={class:"login"},G={class:"login-header"},M={class:"flex-y-center"},S={class:"login-content"},T={class:"login-form"},F={class:"form-title"},W={class:"input-wrapper"},X={class:"input-wrapper"},H={class:"input-wrapper"},N={class:"flex-x-between w-full py-1"},O={class:"login-footer"},Q=I(e({__name:"index",setup(e){const I=a(),Q=s(),Y=r(),Z=o(),{t:J}=l(),ee=t(),ae=t(Q.theme===i.DARK),se=t(!1),re=t(!1),oe=t();t(new URL("/img/logo.Caf6GyEz.png",import.meta.url).href),t(new URL("/img/login-image.BUpi_iuW.svg",import.meta.url).href);const le=t({username:"admin",password:"123456",captchaKey:"",captchaCode:""}),te=n((()=>({username:[{required:!0,trigger:"blur",message:J("login.message.username.required")}],password:[{required:!0,trigger:"blur",message:J("login.message.password.required")},{min:6,message:J("login.message.password.min"),trigger:"blur"}],captchaCode:[{required:!0,trigger:"blur",message:J("login.message.captchaCode.required")}]})));function ie(){v.getCaptcha().then((e=>{le.value.captchaKey=e.captchaKey,oe.value=e.captchaBase64}))}async function ne(){var e;null==(e=ee.value)||e.validate((e=>{e&&(se.value=!0,I.login(le.value).then((async()=>{await I.getUserInfo(),await Y.loadDictionaries();const{path:e,queryParams:a}=function(){const e=Z.query.redirect??"/",a=new URL(e,window.location.origin),s=a.pathname,r={};return a.searchParams.forEach(((e,a)=>{r[a]=e})),{path:s,queryParams:r}}();C.push({path:e,query:a})})).catch((()=>{ie()})).finally((()=>{se.value=!1})))}))}const pe=()=>{const e=Q.theme===i.DARK?i.LIGHT:i.DARK;Q.changeTheme(e)};function me(e){e instanceof KeyboardEvent&&(re.value=e.getModifierState("CapsLock"))}return p((()=>{ie()})),(e,a)=>{const s=D,r=P,o=m("User"),l=E,t=$,i=q,n=m("Lock"),p=L,v=A,C=z,I=k,Q=R,Y=K,Z=U,J=V;return j(),c("div",B,[d("div",G,[d("div",M,[u(s,{modelValue:g(ae),"onUpdate:modelValue":a[0]||(a[0]=e=>f(ae)?ae.value=e:null),"inline-prompt":"","active-icon":"Moon","inactive-icon":"Sunny",onChange:pe},null,8,["modelValue"]),u(r,{class:"ml-2 cursor-pointer"})])]),d("div",S,[d("div",T,[u(Z,{ref_key:"loginFormRef",ref:ee,model:g(le),rules:g(te)},{default:h((()=>[d("div",F,[d("h2",null,w(g(_).title),1)]),u(i,{prop:"username"},{default:h((()=>[d("div",W,[u(l,{class:"mx-2"},{default:h((()=>[u(o)])),_:1}),u(t,{ref:"username",modelValue:g(le).username,"onUpdate:modelValue":a[1]||(a[1]=e=>g(le).username=e),placeholder:e.$t("login.username"),name:"username",size:"large",class:"h-[48px]"},null,8,["modelValue","placeholder"])])])),_:1}),u(p,{visible:g(re),content:e.$t("login.capsLock"),placement:"right"},{default:h((()=>[u(i,{prop:"password"},{default:h((()=>[d("div",X,[u(l,{class:"mx-2"},{default:h((()=>[u(n)])),_:1}),u(t,{modelValue:g(le).password,"onUpdate:modelValue":a[2]||(a[2]=e=>g(le).password=e),placeholder:e.$t("login.password"),type:"password",name:"password",size:"large",class:"h-[48px] pr-2","show-password":"",onKeyup:[me,y(ne,["enter"])]},null,8,["modelValue","placeholder"])])])),_:1})])),_:1},8,["visible","content"]),u(i,{prop:"captchaCode"},{default:h((()=>[d("div",H,[u(v,{"icon-class":"captcha",class:"mx-2"}),u(t,{modelValue:g(le).captchaCode,"onUpdate:modelValue":a[3]||(a[3]=e=>g(le).captchaCode=e),"auto-complete":"off",size:"large",class:"flex-1",placeholder:e.$t("login.captchaCode"),onKeyup:y(ne,["enter"])},null,8,["modelValue","placeholder"]),u(C,{src:g(oe),class:"captcha-img",onClick:ie},null,8,["src"])])])),_:1}),d("div",N,[u(I,null,{default:h((()=>[x(w(e.$t("login.rememberMe")),1)])),_:1}),u(Q,{type:"primary",href:"/forget-password"},{default:h((()=>[x(w(e.$t("login.forgetPassword")),1)])),_:1})]),u(Y,{loading:g(se),type:"primary",size:"large",class:"w-full",onClick:b(ne,["prevent"])},{default:h((()=>[x(w(e.$t("login.login")),1)])),_:1},8,["loading"])])),_:1},8,["model","rules"])])]),d("div",O,[u(J,{size:"small"},{default:h((()=>[a[5]||(a[5]=x(" Copyright © 2021 - 2024 youlai.tech All Rights Reserved. ")),u(Q,{underline:!1,href:"http://beian.miit.gov.cn/",target:"_blank"},{default:h((()=>a[4]||(a[4]=[x(" 皖ICP备20006496号-2 ")]))),_:1})])),_:1})])])}}}),[["__scopeId","data-v-d23066da"]]);export{Q as default};
