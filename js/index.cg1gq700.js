import{d as e,r as l,W as t,br as a,c as o,aK as r,g as n,f as s,k as p,i,m as u,ab as d,w as m,D as c,ac as f,e as v,h as g,S as y,V as b,$ as h,ag as _,ah as k,ai as w,n as V,l as j,G as C,E as x,aZ as U,aJ as S,by as N,cw as A,b7 as $}from"./index.Dv9sjPYC.js";import{v as z}from"./loading.S8LTmobk.js";import"./popper.m2lNosSJ.js";import{E}from"./popover.D-CR5ZXz.js";import{_ as I}from"./index.D-M2h4YD.js";import{a as R,E as D}from"./table-column.D28nzGFS.js";import"./checkbox.Cq-dvxYE.js";/* empty css                */import"./scrollbar.DQblMs23.js";import{a as K,E as M}from"./form-item.DgRMSZzs.js";import{E as Y}from"./date-picker-panel.BOvuOK0w.js";import{E as T,a as G}from"./select.D46WCvpG.js";import"./tree.Dcl2NF7B.js";import"./text.PvK_Xx8y.js";import{E as P}from"./tree-select.BYKNxPD6.js";import{_ as W}from"./DictLabel.vue_vue_type_script_setup_true_lang.CielTJsp.js";import{E as q}from"./link.CHuo07Uc.js";import"./dropdown.BJAt-r5X.js";import"./pagination.CWkEuBr5.js";import"./_baseClone.Br4BWTY9.js";import"./omit.B6E_lyF8.js";import"./_baseIteratee.DbpbFJtj.js";import"./castArray.D1K_WIrw.js";import"./debounce.CITkvERZ.js";import"./toNumber.P9ps2NTq.js";import"./raf.B6j8aosc.js";import"./dayjs.min.nvYJnoDs.js";import"./index.BlULC2eY.js";import"./index.8lkWLndA.js";import"./strings.BtizHOxT.js";import"./index.C5bLMH_j.js";const F={class:"feedback"},J=S(e({__name:"index",props:{selectConfig:{},text:{default:""}},emits:["confirmClick"],setup(e,{emit:S}){const N=e,A=S,$=N.selectConfig.pk??"id",W=!0===N.selectConfig.multiple,q=N.selectConfig.width??"100%",J=N.selectConfig.placeholder??"请选择",L=l(!1),Q=l(!1),Z=l(0),B=l([]),H=t({pageNum:1,pageSize:10}),O=l(),X=l(q);a(O,e=>{X.value=`${e[0].contentRect.width}px`});const ee=l();for(const l of N.selectConfig.formItems)H[l.prop]=l.initialValue??"";function le(){ee.value?.resetFields(),ae(!0)}function te(){ae(!0)}function ae(e=!1){Q.value=!0,e&&(H.pageNum=1,H.pageSize=10),N.selectConfig.indexAction(H).then(e=>{Z.value=e.total,B.value=e.list}).finally(()=>{Q.value=!1})}const oe=l();for(const l of N.selectConfig.tableColumns)if("selection"===l.type){l.reserveSelection=!0;break}const re=l([]),ne=o(()=>re.value.length>0?`已选(${re.value.length})`:"确 定");function se(e){W||0===e.length?re.value=e:(re.value=[e[e.length-1]],oe.value?.clearSelection(),oe.value?.toggleRowSelection(re.value[0],!0),oe.value?.setCurrentRow(re.value[0]))}function pe(e){W&&(re.value=e)}function ie(){ae()}const ue=l(!1);function de(){!1===ue.value&&(ue.value=!0,ae())}function me(){0!==re.value.length?(L.value=!1,A("confirmClick",re.value)):U.error("请选择数据")}function ce(){oe.value?.clearSelection(),re.value=[]}function fe(){L.value=!1}const ve=l();return(l,t)=>{const a=r("ArrowDown"),o=x,U=h,S=G,N=T,A=P,ae=Y,re=M,ue=k,ge=K,ye=D,be=R,he=I,_e=E,ke=z;return s(),n("div",{ref_key:"tableSelectRef",ref:O,style:p("width:"+i(q))},[u(_e,d({visible:L.value,width:X.value,placement:"bottom-end"},e.selectConfig.popover,{onShow:de}),{reference:m(()=>[c("div",{onClick:t[0]||(t[0]=e=>L.value=!L.value)},[j(l.$slots,"default",{},()=>[u(U,{class:"reference","model-value":e.text,readonly:!0,placeholder:i(J)},{suffix:m(()=>[u(o,{style:p({transform:L.value?"rotate(180deg)":"rotate(0)",transition:"transform .5s"})},{default:m(()=>[u(a)]),_:1},8,["style"])]),_:1},8,["model-value","placeholder"])],!0)])]),default:m(()=>[c("div",{ref_key:"popoverContentRef",ref:ve},[u(ge,{ref_key:"formRef",ref:ee,model:H,inline:!0},{default:m(()=>[(s(!0),n(y,null,b(e.selectConfig.formItems,e=>(s(),v(re,{key:e.prop,label:e.label,prop:e.prop},{default:m(()=>["input"===e.type?(s(),n(y,{key:0},["number"===e.attrs?.type?(s(),v(U,d({key:0,modelValue:H[e.prop],"onUpdate:modelValue":l=>H[e.prop]=l,modelModifiers:{number:!0}},{ref_for:!0},e.attrs,{onKeyup:_(te,["enter"])}),null,16,["modelValue","onUpdate:modelValue"])):(s(),v(U,d({key:1,modelValue:H[e.prop],"onUpdate:modelValue":l=>H[e.prop]=l},{ref_for:!0},e.attrs,{onKeyup:_(te,["enter"])}),null,16,["modelValue","onUpdate:modelValue"]))],64)):"select"===e.type?(s(),v(N,d({key:1,modelValue:H[e.prop],"onUpdate:modelValue":l=>H[e.prop]=l},{ref_for:!0},e.attrs),{default:m(()=>[(s(!0),n(y,null,b(e.options,e=>(s(),v(S,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:2},1040,["modelValue","onUpdate:modelValue"])):"tree-select"===e.type?(s(),v(A,d({key:2,modelValue:H[e.prop],"onUpdate:modelValue":l=>H[e.prop]=l},{ref_for:!0},e.attrs),null,16,["modelValue","onUpdate:modelValue"])):"date-picker"===e.type?(s(),v(ae,d({key:3,modelValue:H[e.prop],"onUpdate:modelValue":l=>H[e.prop]=l},{ref_for:!0},e.attrs),null,16,["modelValue","onUpdate:modelValue"])):(s(),n(y,{key:4},["number"===e.attrs?.type?(s(),v(U,d({key:0,modelValue:H[e.prop],"onUpdate:modelValue":l=>H[e.prop]=l,modelModifiers:{number:!0}},{ref_for:!0},e.attrs,{onKeyup:_(te,["enter"])}),null,16,["modelValue","onUpdate:modelValue"])):(s(),v(U,d({key:1,modelValue:H[e.prop],"onUpdate:modelValue":l=>H[e.prop]=l},{ref_for:!0},e.attrs,{onKeyup:_(te,["enter"])}),null,16,["modelValue","onUpdate:modelValue"]))],64))]),_:2},1032,["label","prop"]))),128)),u(re,null,{default:m(()=>[u(ue,{type:"primary",icon:"search",onClick:te},{default:m(()=>[...t[4]||(t[4]=[w("搜索",-1)])]),_:1}),u(ue,{icon:"refresh",onClick:le},{default:m(()=>[...t[5]||(t[5]=[w("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),f((s(),v(be,{ref_key:"tableRef",ref:oe,data:B.value,border:!0,"max-height":250,"row-key":i($),"highlight-current-row":!0,class:V({radio:!W}),onSelect:se,onSelectAll:pe},{default:m(()=>[(s(!0),n(y,null,b(e.selectConfig.tableColumns,e=>(s(),n(y,{key:e.prop},["custom"===e.templet?(s(),v(ye,d({key:0,ref_for:!0},e),{default:m(t=>[j(l.$slots,e.slotName??e.prop,d({prop:e.prop},{ref_for:!0},t),void 0,!0)]),_:2},1040)):(s(),v(ye,d({key:1,ref_for:!0},e),null,16))],64))),128))]),_:3},8,["data","row-key","class"])),[[ke,Q.value]]),Z.value>0?(s(),v(he,{key:0,total:Z.value,"onUpdate:total":t[1]||(t[1]=e=>Z.value=e),page:H.pageNum,"onUpdate:page":t[2]||(t[2]=e=>H.pageNum=e),limit:H.pageSize,"onUpdate:limit":t[3]||(t[3]=e=>H.pageSize=e),onPagination:ie},null,8,["total","page","limit"])):g("",!0),c("div",F,[u(ue,{type:"primary",size:"small",onClick:me},{default:m(()=>[w(C(ne.value),1)]),_:1}),u(ue,{size:"small",onClick:ce},{default:m(()=>[...t[6]||(t[6]=[w("清 空",-1)])]),_:1}),u(ue,{size:"small",onClick:fe},{default:m(()=>[...t[7]||(t[7]=[w("关 闭",-1)])]),_:1})])],512)]),_:3},16,["visible","width"])],4)}}}),[["__scopeId","data-v-50915979"]]),L={pk:"id",width:"70%",placeholder:"请选择用户",formItems:[{type:"input",label:"关键字",prop:"keywords",attrs:{placeholder:"用户名/昵称/手机号",clearable:!0,style:{width:"200px"}}},{type:"tree-select",label:"部门",prop:"deptId",attrs:{placeholder:"请选择",data:[{value:1,label:"有来技术",children:[{value:2,label:"研发部门"},{value:3,label:"测试部门"}]}],filterable:!0,"check-strictly":!0,"render-after-expand":!1,clearable:!0,style:{width:"150px"}}},{type:"select",label:"状态",prop:"status",attrs:{placeholder:"全部",clearable:!0,style:{width:"100px"}},options:[{label:"启用",value:1},{label:"禁用",value:0}]},{type:"date-picker",label:"创建时间",prop:"createAt",attrs:{type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"截止时间","value-format":"YYYY-MM-DD",style:{width:"240px"}}}],indexAction(e){if("createAt"in e){const l=e.createAt;l?.length>1&&(e.startTime=l[0],e.endTime=l[1]),delete e.createAt}return N.getPage(e)},tableColumns:[{type:"selection",width:50,align:"center"},{label:"编号",align:"center",prop:"id",width:100},{label:"用户名",align:"center",prop:"username"},{label:"用户昵称",align:"center",prop:"nickname",width:120},{label:"性别",align:"center",prop:"gender",width:100,templet:"custom",slotName:"gender"},{label:"部门",align:"center",prop:"deptName",width:120},{label:"手机号码",align:"center",prop:"mobile",width:120},{label:"状态",align:"center",prop:"status",templet:"custom",slotName:"status"},{label:"创建时间",align:"center",prop:"createTime",width:180}]},Q={class:"app-container"},Z=e({__name:"index",setup(e){const t=A(),a=l();function r(e){a.value=e[0]}const p=o(()=>{const e=t.getDictItems("gender"),l=e.find(e=>e.value==a.value?.gender)?.label;return a.value?`${a.value.username} - ${l} - ${a.value.deptName}`:""});return(e,l)=>{const t=q,a=$,o=W,d=J;return s(),n("div",Q,[u(t,{href:"https://gitee.com/youlaiorg/vue3-element-admin/blob/master/src/views/demo/table-select/index.vue",type:"primary",target:"_blank",class:"mb-10"},{default:m(()=>[...l[0]||(l[0]=[w(" 示例源码 请点击>>>> ",-1)])]),_:1}),u(d,{text:i(p),"select-config":i(L),onConfirmClick:r},{status:m(e=>[u(a,{type:1==e.row[e.prop]?"success":"info"},{default:m(()=>[w(C(1==e.row[e.prop]?"启用":"禁用"),1)]),_:2},1032,["type"])]),gender:m(e=>[u(o,{modelValue:e.row.gender,"onUpdate:modelValue":l=>e.row.gender=l,code:"gender"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["text","select-config"])])}}});export{Z as default};
