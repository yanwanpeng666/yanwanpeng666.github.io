import{eu as e,v as a,az as t,A as l,_ as s,d as n,B as o,t as r,b as u,r as i,c as d,ao as v,J as c,av as b,ap as p,g as f,h as m,i as h,f as g,k as y,n as x,Z as w,ev as C,ew as N,s as P,ex as R,o as $,cU as E,el as k,m as S,E as T,cH as B,an as A,L as V,M as F,af as j,N as L,bn as _,l as z,eo as W,U as K,C as M,z as H,c1 as O,d2 as U,W as q,c2 as I,ac as X,ae as Y,q as D,H as J}from"./index.Dv9sjPYC.js";import{c as Z,r as G}from"./raf.B6j8aosc.js";import{a as Q,c as ee}from"./strings.BtizHOxT.js";import{u as ae}from"./index.BqoI6SeD.js";import{o as te}from"./omit.B6E_lyF8.js";const le="horizontal",se="vertical",ne={[le]:"deltaX",[se]:"deltaY"},oe=Symbol("tabsRootContextKey"),re=a({tabs:{type:l(Array),default:()=>t([])},tabRefs:{type:l(Object),default:()=>t({})}}),ue="ElTabBar",ie=n({name:ue});var de=s(n({...ie,props:re,setup(e,{expose:a}){const t=e,l=o(oe);l||r(ue,"<el-tabs><el-tab-bar /></el-tabs>");const s=u("tabs"),n=i(),C=i(),N=d(()=>{var e;return v(l.props.defaultValue)||Boolean(null==(e=C.value)?void 0:e.transform)}),P=()=>C.value=(()=>{let e=0,a=0;const s=["top","bottom"].includes(l.props.tabPosition)?"width":"height",n="width"===s?"x":"y",o="x"===n?"left":"top";return t.tabs.every(l=>{if(v(l.paneName))return!1;const n=t.tabRefs[l.paneName];if(!n)return!1;if(!l.active)return!0;e=n[`offset${Q(o)}`],a=n[`client${Q(s)}`];const r=window.getComputedStyle(n);return"width"===s&&(a-=Number.parseFloat(r.paddingLeft)+Number.parseFloat(r.paddingRight),e+=Number.parseFloat(r.paddingLeft)),!1}),{[s]:`${a}px`,transform:`translate${Q(n)}(${e}px)`}})(),R=[];c(()=>t.tabs,async()=>{await w(),P(),R.forEach(e=>e.stop()),R.length=0,Object.values(t.tabRefs).forEach(e=>{R.push(b(e,P))})},{immediate:!0});const $=b(n,()=>P());return p(()=>{R.forEach(e=>e.stop()),R.length=0,$.stop()}),a({ref:n,update:P}),(e,a)=>h(N)?(g(),f("div",{key:0,ref_key:"barRef",ref:n,class:x([h(s).e("active-bar"),h(s).is(h(l).props.tabPosition)]),style:y(C.value)},null,6)):m("v-if",!0)}}),[["__file","tab-bar.vue"]]);const ve=a({panes:{type:l(Array),default:()=>t([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean,tabindex:{type:[String,Number],default:void 0}}),ce="ElTabNav",be=n({name:ce,props:ve,emits:{tabClick:(e,a,t)=>t instanceof Event,tabRemove:(e,a)=>a instanceof Event},setup(a,{expose:t,emit:l}){const s=o(oe);s||r(ce,"<el-tabs><tab-nav /></el-tabs>");const n=u("tabs"),v=C(),p=N(),f=i(),m=i(),h=i(),g=i({}),y=i(),x=i(!1),L=i(0),_=i(!1),z=i(!0),W=P(),K=d(()=>["top","bottom"].includes(s.props.tabPosition)),M=d(()=>K.value?"width":"height"),H=d(()=>({transform:`translate${"width"===M.value?"X":"Y"}(-${L.value}px)`})),{width:O,height:U}=R(f),{width:q,height:I}=R(m,{width:0,height:0},{box:"border-box"}),X=d(()=>K.value?O.value:U.value),Y=d(()=>K.value?q.value:I.value),{onWheel:D}=(({atEndEdge:a,atStartEdge:t,layout:l},s)=>{let n,o=0;const r=e=>e<0&&t.value||e>0&&a.value;return{hasReachedEdge:r,onWheel:a=>{Z(n);const t=a[ne[l.value]];r(o)&&r(o+t)||(o+=t,e()||a.preventDefault(),n=G(()=>{s(o),o=0}))}}})({atStartEdge:d(()=>L.value<=0),atEndEdge:d(()=>Y.value-L.value<=X.value),layout:d(()=>K.value?"horizontal":"vertical")},e=>{L.value=ee(L.value+e,0,Y.value-X.value)}),J=()=>{if(!f.value)return;const e=f.value[`offset${Q(M.value)}`],a=L.value;if(!a)return;const t=a>e?a-e:0;L.value=t},ae=()=>{if(!f.value||!m.value)return;const e=m.value[`offset${Q(M.value)}`],a=f.value[`offset${Q(M.value)}`],t=L.value;if(e-t<=a)return;const l=e-t>2*a?t+a:e-a;L.value=l},te=async()=>{const e=m.value;if(!(x.value&&h.value&&f.value&&e))return;await w();const t=g.value[a.currentName];if(!t)return;const l=f.value,s=t.getBoundingClientRect(),n=l.getBoundingClientRect(),o=K.value?e.offsetWidth-n.width:e.offsetHeight-n.height,r=L.value;let u=r;K.value?(s.left<n.left&&(u=r-(n.left-s.left)),s.right>n.right&&(u=r+s.right-n.right)):(s.top<n.top&&(u=r-(n.top-s.top)),s.bottom>n.bottom&&(u=r+(s.bottom-n.bottom))),u=Math.max(u,0),L.value=Math.min(u,o)},le=()=>{var e;if(!m.value||!f.value)return;a.stretch&&(null==(e=y.value)||e.update());const t=m.value[`offset${Q(M.value)}`],l=f.value[`offset${Q(M.value)}`],s=L.value;l<t?(x.value=x.value||{},x.value.prev=s,x.value.next=s+l<t,t-s<l&&(L.value=t-l)):(x.value=!1,s>0&&(L.value=0))},se=e=>{let a=0;switch(V(e)){case F.left:case F.up:a=-1;break;case F.right:case F.down:a=1;break;default:return}const t=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let l=t.indexOf(e.target)+a;l<0?l=t.length-1:l>=t.length&&(l=0),t[l].focus({preventScroll:!0}),t[l].click(),re()},re=()=>{z.value&&(_.value=!0)},ue=()=>_.value=!1;return c(v,e=>{"hidden"===e?z.value=!1:"visible"===e&&setTimeout(()=>z.value=!0,50)}),c(p,e=>{e?setTimeout(()=>z.value=!0,50):z.value=!1}),b(h,le),$(()=>setTimeout(()=>te(),0)),E(()=>le()),t({scrollToActiveTab:te,removeFocus:ue,focusActiveTab:async()=>{await w();const e=g.value[a.currentName];null==e||e.focus({preventScroll:!0})},tabListRef:m,tabBarRef:y,scheduleRender:()=>k(W)}),()=>{const e=x.value?[S("span",{class:[n.e("nav-prev"),n.is("disabled",!x.value.prev)],onClick:J},[S(T,null,{default:()=>[S(B,null,null)]})]),S("span",{class:[n.e("nav-next"),n.is("disabled",!x.value.next)],onClick:ae},[S(T,null,{default:()=>[S(A,null,null)]})])]:null,t=a.panes.map((e,t)=>{var o,r,u,i,d;const v=e.uid,c=e.props.disabled,b=null!=(r=null!=(o=e.props.name)?o:e.index)?r:`${t}`,p=!c&&(e.isClosable||!1!==e.props.closable&&a.editable);e.index=`${t}`;const f=p?S(T,{class:"is-icon-close",onClick:a=>l("tabRemove",e,a)},{default:()=>[S(j,null,null)]}):null,m=(null==(i=(u=e.slots).label)?void 0:i.call(u))||e.props.label,h=!c&&e.active?null!=(d=a.tabindex)?d:s.props.tabindex:-1;return S("div",{ref:e=>((e,a)=>{g.value[a]=e})(e,b),class:[n.e("item"),n.is(s.props.tabPosition),n.is("active",e.active),n.is("disabled",c),n.is("closable",p),n.is("focus",_.value)],id:`tab-${b}`,key:`tab-${v}`,"aria-controls":`pane-${b}`,role:"tab","aria-selected":e.active,tabindex:h,onFocus:()=>re(),onBlur:()=>ue(),onClick:a=>{ue(),l("tabClick",e,b,a)},onKeydown:a=>{const t=V(a);!p||t!==F.delete&&t!==F.backspace||l("tabRemove",e,a)}},[m,f])});return W.value,S("div",{ref:h,class:[n.e("nav-wrap"),n.is("scrollable",!!x.value),n.is(s.props.tabPosition)]},[e,S("div",{class:n.e("nav-scroll"),ref:f},[a.panes.length>0?S("div",{class:[n.e("nav"),n.is(s.props.tabPosition),n.is("stretch",a.stretch&&["top","bottom"].includes(s.props.tabPosition))],ref:m,style:H.value,role:"tablist",onKeydown:se,onWheel:D},[a.type?null:S(de,{ref:y,tabs:[...a.panes],tabRefs:g.value},null),t]):null])])}}}),pe=a({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},defaultValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:l(Function),default:()=>!0},stretch:Boolean,tabindex:{type:[String,Number],default:0}}),fe=e=>L(e)||_(e);var me=n({name:"ElTabs",props:pe,emits:{[K]:e=>fe(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>fe(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>fe(e),tabAdd:()=>!0},setup(e,{emit:a,slots:t,expose:l}){var s;const n=u("tabs"),o=d(()=>["left","right"].includes(e.tabPosition)),{children:r,addChild:b,removeChild:p,ChildrenSorter:f}=ae(M(),"ElTabPane"),m=i(),h=i(null!=(s=v(e.modelValue)?e.defaultValue:e.modelValue)?s:"0"),g=async(t,l=!1)=>{var s,n,o,u;if(h.value!==t&&!v(t))try{let i;if(e.beforeLeave){const a=e.beforeLeave(t,h.value);i=a instanceof Promise?await a:a}else i=!0;if(!1!==i){const e=null==(s=r.value.find(e=>e.paneName===h.value))?void 0:s.isFocusInsidePane();h.value=t,l&&(a(K,t),a("tabChange",t)),null==(o=null==(n=m.value)?void 0:n.removeFocus)||o.call(n),e&&(null==(u=m.value)||u.focusActiveTab())}}catch(i){}},y=(e,t,l)=>{e.props.disabled||(a("tabClick",e,l),g(t,!0))},x=(e,t)=>{e.props.disabled||v(e.props.name)||(t.stopPropagation(),a("edit",e.props.name,"remove"),a("tabRemove",e.props.name))},C=()=>{a("edit",void 0,"add"),a("tabAdd")},N=e=>{const a=V(e);[F.enter,F.numpadEnter].includes(a)&&C()},P=a=>{const t=a.el.firstChild,l=["bottom","right"].includes(e.tabPosition)?a.children[0].el:a.children[1].el;t!==l&&t.before(l)};return c(()=>e.modelValue,e=>g(e)),c(h,async()=>{var e;await w(),null==(e=m.value)||e.scrollToActiveTab()}),H(oe,{props:e,currentName:h,registerPane:b,unregisterPane:p,nav$:m}),l({currentName:h,get tabNavRef(){return te(m.value,["scheduleRender"])}}),()=>{const a=t["add-icon"],l=e.editable||e.addable?S("div",{class:[n.e("new-tab"),o.value&&n.e("new-tab-vertical")],tabindex:e.tabindex,onClick:C,onKeydown:N},[a?z(t,"add-icon"):S(T,{class:n.is("icon-plus")},{default:()=>[S(W,null,null)]})]):null,s=S("div",{class:[n.e("header"),o.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[S(f,null,{default:()=>S(be,{ref:m,currentName:h.value,editable:e.editable,type:e.type,panes:r.value,stretch:e.stretch,onTabClick:y,onTabRemove:x},null),$stable:!0}),l]),u=S("div",{class:n.e("content")},[z(t,"default")]);return S("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:"card"===e.type,[n.m("border-card")]:"border-card"===e.type}],onVnodeMounted:P,onVnodeUpdated:P},[u,s])}}});const he=a({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),ge="ElTabPane",ye=n({name:ge});var xe=s(n({...ye,props:he,setup(e){const a=e,t=M(),l=O(),s=o(oe);s||r(ge,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=u("tab-pane"),v=i(),b=i(),y=d(()=>{var e;return null!=(e=a.closable)?e:s.props.closable}),w=U(()=>{var e;return s.currentName.value===(null!=(e=a.name)?e:b.value)}),C=i(w.value),N=d(()=>{var e;return null!=(e=a.name)?e:b.value}),P=U(()=>!a.lazy||C.value||w.value);c(w,e=>{e&&(C.value=!0)});const R=q({uid:t.uid,getVnode:()=>t.vnode,slots:l,props:a,paneName:N,active:w,index:b,isClosable:y,isFocusInsidePane:()=>{var e;return null==(e=v.value)?void 0:e.contains(document.activeElement)}});return s.registerPane(R),p(()=>{s.unregisterPane(R)}),I(()=>{var e;l.label&&(null==(e=s.nav$.value)||e.scheduleRender())}),(e,a)=>h(P)?X((g(),f("div",{key:0,id:`pane-${h(N)}`,ref_key:"paneRef",ref:v,class:x(h(n).b()),role:"tabpanel","aria-hidden":!h(w),"aria-labelledby":`tab-${h(N)}`},[z(e.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Y,h(w)]]):m("v-if",!0)}}),[["__file","tab-pane.vue"]]);const we=D(me,{TabPane:xe}),Ce=J(xe);export{Ce as E,we as a};
