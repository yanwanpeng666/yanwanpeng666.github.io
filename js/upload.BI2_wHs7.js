import{d as e,d9 as l,a,l as t,w as s,f as u,c as o,W as i,aO as r,ax as n,E as m,r as p,y as d,k as c,J as f,$ as g}from"./index.BM8HYK7W.js";import{a as _,E as v}from"./el-form-item.MoRrApRf.js";import{E as y}from"./el-link.Dl57cyuI.js";import{E as j}from"./el-progress.BHaJKgy8.js";/* empty css                */import{_ as V}from"./plus.CKS9jjhi.js";import{u as h,d as b}from"./index.e4ljorWg.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{E as U}from"./el-dialog.DOb72mWz.js";import"./castArray.CjaThbuf.js";import"./_Uint8Array.Bk6YvMkU.js";import"./isEqual.CKhcz8jC.js";import"./use-dialog.IGiCrkwp.js";import"./isUndefined.DgmxjSXK.js";import"./refs.BIGcnKJG.js";const x=["src"],E=w(e({__name:"SingleUpload",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:p}){const d=l(e,"modelValue",p);async function c(e){const{data:l}=await h(e.file);d.value=l.url}function f(e){return!(e.size>2196608)||(n.warning("上传图片不能大于2M"),!1)}return(e,l)=>{const n=V,p=m,g=j;return a(),t(g,{modelValue:u(d),"onUpdate:modelValue":l[0]||(l[0]=e=>r(d)?d.value=e:null),class:"single-uploader","show-file-list":!1,"list-type":"picture-card","before-upload":f,"http-request":c},{default:s((()=>[u(d)?(a(),o("img",{key:0,src:u(d),class:"single-uploader__image"},null,8,x)):(a(),t(p,{key:1,class:"single-uploader__icon"},{default:s((()=>[i(n)])),_:1}))])),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-9a210ca4"]]),q=["src"],M=e({__name:"MultiUpload",props:{modelValue:{type:Array,default:()=>[]},limit:{type:Number,default:10}},emits:["update:modelValue"],setup(e,{emit:l}){const t=l,m=e,g=p(""),_=p(!1),v=p([]);async function y(e){const{data:l}=await h(e.file),a=v.value.findIndex((l=>l.uid==e.file.uid));v.value.splice(a,1,{name:l.name,url:l.url}),t("update:modelValue",v.value.map((e=>e.url)))}function w(e){const l=e.url;l&&b(l).then((()=>{t("update:modelValue",v.value.map((e=>e.url)))}))}function x(e){return!(e.size>2196608)||(n.warning("上传图片不能大于2M"),!1)}d((()=>m.modelValue),(e=>{const l=v.value.map((e=>e.url));l.length>0&&l.length===e.length&&l.every((l=>e.some((e=>e===l))))&&e.every((e=>l.some((l=>l===e))))||(v.value=e.map((e=>({url:e}))))}),{immediate:!0});const E=e=>{g.value=e.url,_.value=!0};return(e,l)=>{const t=V,n=j,p=U;return a(),o(f,null,[i(n,{"file-list":u(v),"onUpdate:fileList":l[0]||(l[0]=e=>r(v)?v.value=e:null),"list-type":"picture-card","before-upload":x,"http-request":y,"on-remove":w,"on-preview":E,limit:m.limit},{default:s((()=>[i(t)])),_:1},8,["file-list","limit"]),i(p,{modelValue:u(_),"onUpdate:modelValue":l[1]||(l[1]=e=>r(_)?_.value=e:null)},{default:s((()=>[c("img",{"w-full":"",src:u(g),alt:"Preview Image"},null,8,q)])),_:1},8,["modelValue"])],64)}}}),k={class:"app-container"},I=e({__name:"upload",setup(e){const l=p("https://oss.youlai.tech/youlai-boot/2023/05/20/2b6d8b49fa1047348a0a41cef5aaf69e.gif"),t=p(["https://s2.loli.net/2023/05/24/yNsxFC8rLHMZQcK.jpg","https://s2.loli.net/2023/05/24/RuHFMwW4rG5lIqs.jpg","https://s2.loli.net/2023/05/24/ZPiGbcpR91WqInB.jpg","https://s2.loli.net/2023/05/24/e1bcnEq3MFdmlNL.jpg","https://s2.loli.net/2023/05/24/wZTSPj1yDQNcuhU.jpg"]);return(e,n)=>{const m=y,p=_,d=v;return a(),o("div",k,[i(m,{href:"https://gitee.com/youlaiorg/vue3-element-admin/blob/master/src/views/demo/upload.vue",type:"primary",target:"_blank",class:"mb-10"},{default:s((()=>[g("示例源码 请点击>>>>")])),_:1}),i(d,null,{default:s((()=>[i(p,{label:"单图上传"},{default:s((()=>[i(E,{modelValue:u(l),"onUpdate:modelValue":n[0]||(n[0]=e=>r(l)?l.value=e:null)},null,8,["modelValue"])])),_:1}),i(p,{label:"多图上传"},{default:s((()=>[i(M,{modelValue:u(t),"onUpdate:modelValue":n[1]||(n[1]=e=>r(t)?t.value=e:null)},null,8,["modelValue"])])),_:1})])),_:1})])}}});export{I as default};
